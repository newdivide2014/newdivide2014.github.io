<!DOCTYPE html>
<html lang="zh-CN">
    <head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
    <meta charset="UTF-8" />

    <meta name="generator" content="Hugo 0.87.0" /><meta name="theme-color" content="#16171d" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no" />
    
    <meta http-equiv="Cache-Control" content="no-transform" />
    
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <title> | 嘟囔</title>

    <link rel="stylesheet" href="../../../zh/css/meme.min.08ed68661810a27e7927361364663d9e949a9748be9e0ce5a792fb5c9254e7d7.css"/>

    
    
        <script src="../../../zh/js/meme.min.3caab2f55d2736c9f8c8edef781ef7232b8ed3e2ce40d5236eaa9af1eee9b734.js"></script>

    

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB&#43;Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" media="print" onload="this.media='all'" />
        <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB&#43;Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" /></noscript>

    <meta name="author" content="嘟囔" /><meta name="description" content="C语言中access/_access函数的使用 https://blog.csdn.net/fengbingchun/article/details/100342049/ int access(const char *pathname, int mode); Linux inotify详解 https://blog.csdn.net/breakout_alex/article/details/89028868 1 2 3 int fd = inotify_init (); int wd = inotify_add_watch (fd, path, mask); int ret = inotify_rm_watch (fd, wd); https://blog.csdn.net/daiyudong2020/article/details/51695502 ==https://blog.csdn.net/u011279649/article/details/52016555== ==https://blog.csdn.net/liuhengxiao/article/details/44171697== IN_IGNORED：监控被显式移除（调用inotify_rm_watch()），或者自动移除（文件被删除或者文件系统被卸载） https://blog.csdn.net/hanjw05/article/details/53860132 IN_ALL_EVENTS 以上所有flag的集合 加密原始文件 sh ../bmgjx/bin/dae_bmgjx.sh 8 /test/123.key userauth.txt userauth.txt.enc 1 编译加密解密调用openssl g&#43;&#43; zbtest.cpp -I/usr/local/ssl/include -lssl -lcrypto -ldl -L/usr/local/ssl/lib -I. -L/work/bmgjx/lib/ -lcryptokeymgr g&#43;&#43; Untitled-1.cpp -I/usr/local/ssl/include -lssl -lcrypto -ldl -L/usr/local/ssl/lib -I. -L/work/bmgjx/lib/ -lcryptokeymgr 1 C&#43;&#43;: munmap_chunk(): invalid pointer 2017年2……" />

    <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon" />
    <link rel="mask-icon" href="../../../icons/safari-pinned-tab.svg" color="#2a6df4" />
    <link rel="apple-touch-icon" sizes="180x180" href="../../../icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="嘟囔" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="嘟囔" />
    <meta name="msapplication-starturl" content="../../../" />
    <meta name="msapplication-TileColor" content="#fff" />
    <meta name="msapplication-TileImage" content="../../../icons/mstile-150x150.png" />
    <link rel="manifest" href="../../../manifest.json" />

    
    

    
    <link rel="canonical" href="https://newdivide2014.github.io/zh/posts/tmp/" />
    

<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "datePublished": "2021-01-01T20:17:00+00:00",
        "dateModified": "2021-09-29T18:35:15+08:00",
        "url": "https://newdivide2014.github.io/zh/posts/tmp/",
        "headline": "",
        "description": "C语言中access/_access函数的使用 https://blog.csdn.net/fengbingchun/article/details/100342049/ int access(const char *pathname, int mode); Linux inotify详解 https://blog.csdn.net/breakout_alex/article/details/89028868 1 2 3 int fd = inotify_init (); int wd = inotify_add_watch (fd, path, mask); int ret = inotify_rm_watch (fd, wd); https://blog.csdn.net/daiyudong2020/article/details/51695502 ==https://blog.csdn.net/u011279649/article/details/52016555== ==https://blog.csdn.net/liuhengxiao/article/details/44171697== IN_IGNORED：监控被显式移除（调用inotify_rm_watch()），或者自动移除（文件被删除或者文件系统被卸载） https://blog.csdn.net/hanjw05/article/details/53860132 IN_ALL_EVENTS 以上所有flag的集合 加密原始文件 sh ../bmgjx/bin/dae_bmgjx.sh 8 /test/123.key userauth.txt userauth.txt.enc 1 编译加密解密调用openssl g++ zbtest.cpp -I/usr/local/ssl/include -lssl -lcrypto -ldl -L/usr/local/ssl/lib -I. -L/work/bmgjx/lib/ -lcryptokeymgr g++ Untitled-1.cpp -I/usr/local/ssl/include -lssl -lcrypto -ldl -L/usr/local/ssl/lib -I. -L/work/bmgjx/lib/ -lcryptokeymgr 1 C++: munmap_chunk(): invalid pointer 2017年2……",
        "inLanguage" : "zh-CN",
        "articleSection": "posts",
        "wordCount":  9310 ,
        "image": "https://newdivide2014.github.io/icons/apple-touch-icon.png",
        "author": {
            "@type": "Person",
            "description": "一路朗月清风似明昭",
            "email": "newdivide7037@gmail.com",
            "image": "https://newdivide2014.github.io/icons/apple-touch-icon.png",
            "url": "https://newdivide2014.github.io/zh/",
            "name": "嘟囔"
        },
        "license": "[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)",
        "publisher": {
            "@type": "Organization",
            "name": "嘟囔",
            "logo": {
                "@type": "ImageObject",
                "url": "https://newdivide2014.github.io/icons/apple-touch-icon.png"
            },
            "url": "https://newdivide2014.github.io/zh/"
        },
        "mainEntityOfPage": {
            "@type": "WebSite",
            "@id": "https://newdivide2014.github.io/zh/"
        }
    }
</script>

    

<meta name="twitter:card" content="summary" />


    



<meta property="og:title" content="" />
<meta property="og:description" content="C语言中access/_access函数的使用 https://blog.csdn.net/fengbingchun/article/details/100342049/ int access(const char *pathname, int mode); Linux inotify详解 https://blog.csdn.net/breakout_alex/article/details/89028868 1 2 3 int fd = inotify_init (); int wd = inotify_add_watch (fd, path, mask); int ret = inotify_rm_watch (fd, wd); https://blog.csdn.net/daiyudong2020/article/details/51695502 ==https://blog.csdn.net/u011279649/article/details/52016555== ==https://blog.csdn.net/liuhengxiao/article/details/44171697== IN_IGNORED：监控被显式移除（调用inotify_rm_watch()），或者自动移除（文件被删除或者文件系统被卸载） https://blog.csdn.net/hanjw05/article/details/53860132 IN_ALL_EVENTS 以上所有flag的集合 加密原始文件 sh ../bmgjx/bin/dae_bmgjx.sh 8 /test/123.key userauth.txt userauth.txt.enc 1 编译加密解密调用openssl g&#43;&#43; zbtest.cpp -I/usr/local/ssl/include -lssl -lcrypto -ldl -L/usr/local/ssl/lib -I. -L/work/bmgjx/lib/ -lcryptokeymgr g&#43;&#43; Untitled-1.cpp -I/usr/local/ssl/include -lssl -lcrypto -ldl -L/usr/local/ssl/lib -I. -L/work/bmgjx/lib/ -lcryptokeymgr 1 C&#43;&#43;: munmap_chunk(): invalid pointer 2017年2……" />
<meta property="og:url" content="https://newdivide2014.github.io/zh/posts/tmp/" />
<meta property="og:site_name" content="嘟囔" />
<meta property="og:locale" content="zh" /><meta property="og:image" content="https://newdivide2014.github.io/icons/apple-touch-icon.png" />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2021-01-01T20:17:00&#43;00:00" />
    <meta property="article:modified_time" content="2021-09-29T18:35:15&#43;08:00" />
    
    <meta property="article:section" content="posts" />



    
    

    
</head>

    <body>
        <div class="container">
            
    <header class="header">
        
            <div class="header-wrapper">
                <div class="header-inner single">
                    
    <div class="site-brand">
        
            <a href="../../../zh/" class="brand">嘟囔</a>
        
    </div>

                    <nav class="nav">
    <ul class="menu" id="menu">
        
            
        
        
        
        
            
                <li class="menu-item"><a href="../../../zh/bbtalk/"><span class="menu-item-name">😂哔哔</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="../../../zh/posts/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon archive"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg><span class="menu-item-name">归档</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="../../../zh/categories/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon th"><path d="M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"/></svg><span class="menu-item-name">分类</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="../../../zh/tags/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="icon tags"><path d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"/></svg><span class="menu-item-name">标签</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="../../../zh/about/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon user-circle"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><span class="menu-item-name">关于</span></a>
                </li>
            
        
            
                
                    
                        
                        
                    
                
            
        
            
                
                    
                    
                        <li class="menu-item">
                            <a id="theme-switcher" href="#"><span class="icon theme-icon-light">🌞</span><span class="icon theme-icon-dark">🌙</span></a>
                        </li>
                    
                
            
        
    </ul>
</nav>

                    
                </div>
            </div>
            

        
    </header>




            
            
    <main class="main single" id="main">
    <div class="main-inner">

        

        <article class="content post h-entry" data-align="default" data-type="posts" data-toc-num="true">

            <h1 class="post-title p-name"></h1>

            

            
                
            

            
                

<div class="post-meta">
    
    
        
        <time datetime="2021-09-29T18:35:15&#43;08:00" class="post-meta-item modified dt-updated"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M400 64h-48V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H160V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 400H54a6 6 0 0 1-6-6V160h352v298a6 6 0 0 1-6 6zm-52.849-200.65L198.842 404.519c-4.705 4.667-12.303 4.637-16.971-.068l-75.091-75.699c-4.667-4.705-4.637-12.303.068-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l44.104 44.461 111.072-110.181c4.705-4.667 12.303-4.637 16.971.068l22.536 22.718c4.667 4.705 4.636 12.303-.069 16.97z"/></svg>&nbsp;Wednesday, September 29, 2021</time>
    
    
    
        
        
        
            
        
    
    
        
        <span class="post-meta-item wordcount"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&nbsp;9310</span>
    
    
        
        <span class="post-meta-item reading-time"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;19&nbsp;分钟</span>
    
    
        
            
            <span class="post-meta-item busuanzi-page-pv" id="busuanzi_container_page_pv"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="icon post-meta-icon"><path d="M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"/></svg>&nbsp;<span id="busuanzi_value_page_pv"></span></span>
        
    
    
</div>

            

            <nav class="contents">
  <h2 id="contents" class="contents-title">目录</h2><ol class="toc">
    <li>
      <ol>
        <li><a id="contents:node不能用" href="#node不能用">node不能用</a></li>
      </ol>
    </li>
  </ol>
</nav><div class="post-body e-content">
                <p>C语言中access/_access函数的使用
<a href="https://blog.csdn.net/fengbingchun/article/details/100342049/" target="_blank" rel="noopener">https://blog.csdn.net/fengbingchun/article/details/100342049/</a></p>
<p><code>int access(const char *pathname, int mode);</code></p>
<hr>
<p>Linux inotify详解
<a href="https://blog.csdn.net/breakout_alex/article/details/89028868" target="_blank" rel="noopener">https://blog.csdn.net/breakout_alex/article/details/89028868</a></p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="kt">int</span> <span class="n">fd</span> <span class="o">=</span> <span class="n">inotify_init</span> <span class="p">();</span>
<span class="kt">int</span> <span class="n">wd</span> <span class="o">=</span> <span class="n">inotify_add_watch</span> <span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">mask</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">inotify_rm_watch</span> <span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">wd</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><p><a href="https://blog.csdn.net/daiyudong2020/article/details/51695502" target="_blank" rel="noopener">https://blog.csdn.net/daiyudong2020/article/details/51695502</a>
==https://blog.csdn.net/u011279649/article/details/52016555==
==https://blog.csdn.net/liuhengxiao/article/details/44171697==
IN_IGNORED：监控被显式移除（调用inotify_rm_watch()），或者自动移除（文件被删除或者文件系统被卸载）
<a href="https://blog.csdn.net/hanjw05/article/details/53860132" target="_blank" rel="noopener">https://blog.csdn.net/hanjw05/article/details/53860132</a>
IN_ALL_EVENTS	以上所有flag的集合</p>
<hr>
<p>加密原始文件
<code>sh ../bmgjx/bin/dae_bmgjx.sh 8 /test/123.key userauth.txt userauth.txt.enc 1</code></p>
<p>编译加密解密调用openssl
<code> g++ zbtest.cpp -I/usr/local/ssl/include -lssl -lcrypto -ldl -L/usr/local/ssl/lib  -I. -L/work/bmgjx/lib/  -lcryptokeymgr</code></p>
<p><code> g++ Untitled-1.cpp  -I/usr/local/ssl/include -lssl -lcrypto -ldl -L/usr/local/ssl/lib  -I. -L/work/bmgjx/lib/  -lcryptokeymgr</code></p>
<hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"> C++: munmap_chunk<span class="o">()</span>: invalid pointer
</code></pre></td></tr></table></div>
</div>
</div><p>2017年2月22日 中午
336 字  1 分钟
指针问题绝对是C++ 中最令人头疼的问题之一。 最近在写一个程序，编译通过，运行的时候出现这个错误。很明显是指针的问题，并且确定是在 delete[] 一个指针的时候发生的错误（可以用gdb调试进行错误定位），但就是不知道问题出在哪儿。网上基本给出两种意见：</p>
<p>指针在运行过程中被修改。
指针在delete[] （free）之前已经被 delete[] （free）过了。
仔细检查之后发现并不存在这俩问题。最后经过逐行排查，发现是在给指针所指向的数组赋值的时候访问越界，给超过边界的内存赋值。但是访问越界的时候不会直接报出错误，等到delete的时候程序认为指针已经被修改了（所指向的内存发生了变化），所以会报错。这么来看这个问题本质上还是属于上面提到的第一种，只是比较隐蔽和直觉相悖，难以发现。</p>
<p>访问指针也有可能修改指针的，切记。</p>
<p>常见指针错误一定要熟悉并尽可能避免，详细总结可参考下面文章：</p>
<p>参考链接：</p>
<p>C/C++常见指针错误 and 内存访问越界</p>
<p>C/C++
Bug C++
如果你对本文有任何疑问或建议，欢迎联系我。本博客所有文章除特别声明外，均为原创文章，未经授权请勿转载！</p>
<hr>
<p>ninja
<a href="https://ninja-build.org/" target="_blank" rel="noopener">https://ninja-build.org/</a>
build from source:</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">git clone git://github.com/ninja-build/ninja.git <span class="o">&amp;&amp;</span> <span class="nb">cd</span> ninja
git checkout release
cat README.md
./configure.py --bootstrap
</code></pre></td></tr></table></div>
</div>
</div><p>This will generate the <code>ninja</code> binary and a <code>build.ninja</code> file you can now use
to build Ninja with itself.</p>
<p>CMake</p>
<pre><code>cmake -Bbuild-cmake -H.
cmake --build build-cmake
</code></pre><hr>
<p>google</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">fipscheck-1.4.1-6.el7.aarch64 has missing requires of fipscheck-lib<span class="o">(</span>aarch-64<span class="o">)</span> <span class="o">=</span> <span class="o">(</span><span class="s1">&#39;0&#39;</span>, <span class="s1">&#39;1.4.1&#39;</span>, <span class="s1">&#39;6.el7&#39;</span><span class="o">)</span>
fipscheck-1.4.1-6.el7.aarch64 has missing requires of libfipscheck.so.1<span class="o">()(</span>64bit<span class="o">)</span>
newt-0.52.15-4.el7.aarch64 has missing requires of libslang.so.2<span class="o">()(</span>64bit<span class="o">)</span>
newt-0.52.15-4.el7.aarch64 has missing requires of libslang.so.2<span class="o">(</span>SLANG2<span class="o">)(</span>64bit<span class="o">)</span>
nss-sysinit-3.36.0-7.1.el7_6.aarch64 has missing requires of <span class="nv">nss</span> <span class="o">=</span> <span class="o">(</span><span class="s1">&#39;0&#39;</span>, <span class="s1">&#39;3.36.0&#39;</span>, <span class="s1">&#39;7.1.el7_6&#39;</span><span class="o">)</span>
nss-tools-3.36.0-7.1.el7_6.aarch64 has missing requires of nss<span class="o">(</span>aarch-64<span class="o">)</span> <span class="o">=</span> <span class="o">(</span><span class="s1">&#39;0&#39;</span>, <span class="s1">&#39;3.36.0&#39;</span>, <span class="s1">&#39;7.1.el7_6&#39;</span><span class="o">)</span>
p11-kit-trust-0.23.5-3.el7.aarch64 has missing requires of libtasn1.so.6<span class="o">()(</span>64bit<span class="o">)</span>
p11-kit-trust-0.23.5-3.el7.aarch64 has missing requires of libtasn1.so.6<span class="o">(</span>LIBTASN1_0_3<span class="o">)(</span>64bit<span class="o">)</span>
4:perl-5.16.3-294.el7_6.aarch64 has missing requires of perl<span class="o">(</span>threads::shared<span class="o">)</span>
polkit-pkla-compat-0.1-4.el7.aarch64 has missing requires of libpolkit-gobject-1.so.0<span class="o">()(</span>64bit<span class="o">)</span>
pygpgme-0.3-9.el7.aarch64 has missing requires of libgpgme.so.11<span class="o">()(</span>64bit<span class="o">)</span>
pygpgme-0.3-9.el7.aarch64 has missing requires of libgpgme.so.11<span class="o">(</span>GPGME_1.0<span class="o">)(</span>64bit<span class="o">)</span>
pygpgme-0.3-9.el7.aarch64 has missing requires of libgpgme.so.11<span class="o">(</span>GPGME_1.1<span class="o">)(</span>64bit<span class="o">)</span>
rpm-build-libs-4.11.3-35.el7.aarch64 has missing requires of rpm-libs<span class="o">(</span>aarch-64<span class="o">)</span> <span class="o">=</span> <span class="o">(</span><span class="s1">&#39;0&#39;</span>, <span class="s1">&#39;4.11.3&#39;</span>, <span class="s1">&#39;35.el7&#39;</span><span class="o">)</span>
yum-3.4.3-161.el7.centos.noarch has missing requires of yum-metadata-parser &gt;<span class="o">=</span> <span class="o">(</span><span class="s1">&#39;0&#39;</span>, <span class="s1">&#39;1.1.0&#39;</span>, None<span class="o">)</span>
yum-3.4.3-161.el7.centos.noarch has missing requires of yum-plugin-fastestmirror
Error: check all
</code></pre></td></tr></table></div>
</div>
</div><p>libcom_err-devel.aarch64
su -c 'yum install fipscheck-lib.aarch64  pinentry.aarch64  libcom_err.aarch64'</p>
<p>libtasn1
polkit-pkla-compat
rpm-build-libs
yum install polkit</p>
<hr>
<p>fipscheck-1.4.1-6.el7.aarch64 has missing requires of fipscheck-lib(aarch-64) = ('0', '1.4.1', '6.el7')
fipscheck-1.4.1-6.el7.aarch64 has missing requires of libfipscheck.so.1()(64bit)
newt-0.52.15-4.el7.aarch64 has missing requires of libslang.so.2()(64bit)
newt-0.52.15-4.el7.aarch64 has missing requires of libslang.so.2(SLANG2)(64bit)
nss-sysinit-3.36.0-7.1.el7_6.aarch64 has missing requires of nss = ('0', '3.36.0', '7.1.el7_6')
nss-tools-3.36.0-7.1.el7_6.aarch64 has missing requires of nss(aarch-64) = ('0', '3.36.0', '7.1.el7_6')
p11-kit-trust-0.23.5-3.el7.aarch64 has missing requires of libtasn1.so.6()(64bit)
p11-kit-trust-0.23.5-3.el7.aarch64 has missing requires of libtasn1.so.6(LIBTASN1_0_3)(64bit)
4:perl-5.16.3-294.el7_6.aarch64 has missing requires of perl(threads::shared)
polkit-pkla-compat-0.1-4.el7.aarch64 has missing requires of libpolkit-gobject-1.so.0()(64bit)
pygpgme-0.3-9.el7.aarch64 has missing requires of libgpgme.so.11()(64bit)
pygpgme-0.3-9.el7.aarch64 has missing requires of libgpgme.so.11(GPGME_1.0)(64bit)
pygpgme-0.3-9.el7.aarch64 has missing requires of libgpgme.so.11(GPGME_1.1)(64bit)
rpm-build-libs-4.11.3-35.el7.aarch64 has missing requires of rpm-libs(aarch-64) = ('0', '4.11.3', '35.el7')
yum-3.4.3-161.el7.centos.noarch has missing requires of yum-metadata-parser &gt;= ('0', '1.1.0', None)
yum-3.4.3-161.el7.centos.noarch has missing requires of yum-plugin-fastestmirror
Error: check all</p>
<p>libcom_err-devel.aarch64
su -c 'yum install fipscheck-lib.aarch64  pinentry.aarch64  libcom_err.aarch64'</p>
<p>libtasn1
polkit-pkla-compat
rpm-build-libs
yum install polkit</p>
<hr>
<p>git clone <a href="https://chromium.googlesource.com/chromium/tools/depot_tools.git" target="_blank" rel="noopener">https://chromium.googlesource.com/chromium/tools/depot_tools.git</a>
export PATH=&quot;$PATH:/path/to/depot_tools&quot;</p>
<p>fetch --nohooks chromium
git clone <a href="https://chromium.googlesource.com/chromium/tools/depot_tools.git" target="_blank" rel="noopener">https://chromium.googlesource.com/chromium/tools/depot_tools.git</a>
export PATH=&quot;$PATH:/path/to/depot_tools&quot;</p>
<p>fetch --nohooks --no-history chromium</p>
<p>1.报错：
depot_tools/bootstrap_python3: 行 32: bootstrap-3.8.0.chromium.8_bin/python3/bin/python3: 没有那个文件或目录</p>
<p>2.解决：</p>
<p>emacs  depot_tools/bootstrap_python3</p>
<p>-BOOTSTRAP_PYTHON_BIN=&quot;${BOOTSTRAP_PATH}/python3/bin/python3&quot;
+BOOTSTRAP_PYTHON_BIN=&quot;/usr/bin/python3&quot;</p>
<hr>
<p>Alternatively, you can build GN from source with a C++17 compiler:</p>
<pre><code>git clone https://gn.googlesource.com/gn
cd gn
python build/gen.py
ninja -C out
# To run tests:
out/gn_unittests
</code></pre>
<p>ninja: no work to do.
ERROR at //printing/BUILD.gn:411:14: Script returned non-zero exit code.
libs = exec_script(&quot;cups_config_helper.py&quot;,
^----------
Current dir: /work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/out/
Command: python /work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/printing/cups_config_helper.py --libs-for-gn /work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/build/linux/debian_sid_arm64-sysroot
Returned 1 and printed out:</p>
<p>cups-config not found: /work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/build/linux/debian_sid_arm64-sysroot/usr/bin/cups-config</p>
<p>[root@localhost gn]# find /work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/ -name cups-config   <br>
/work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/printing/usr/bin/cups-config</p>
<p>subprocess.check_call(['tar', 'xf', tarball, '-C', sysroot])</p>
<p>/work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/out/Debug/gn gen /work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/out/Debug --args='target_cpu=&quot;arm64″' --root=/work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212</p>
<p>[root@localhost gn]# ./bootstrap/bootstrap.py   -s --gn-gen-args=' custom_toolchain=&quot;//build/arm64&quot;'  --build-path=out/</p>
<hr>
<p>/work/bao/git/devrte/runtime/gcc-9.2.0/bin/g++</p>
<hr>
<p>ninja: Entering directory `/work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/out/gn_build'
ninja: no work to do.
ERROR Unresolved dependencies.
//:gn_all(//build/toolchain/linux:clang_arm64)
needs //printing:printing_unittests(//build/toolchain/linux:clang_arm64)</p>
<p>Traceback (most recent call last):
File &quot;./bootstrap/bootstrap.py&quot;, line 139, in <module>
sys.exit(main(sys.argv[1:]))
File &quot;./bootstrap/bootstrap.py&quot;, line 133, in main
'--args=%s' % gn_gen_args, &quot;--root=&quot; + SRC_ROOT
File &quot;/usr/lib64/python2.7/subprocess.py&quot;, line 542, in check_call
raise CalledProcessError(retcode, cmd)
subprocess.CalledProcessError: Command '['/work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/out/gn', 'gen', '/work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/out/', '--args= is_debug=false', '--root=/work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212']' returned non-zero exit status 1</p>
<p>注释掉这俩行
[root@localhost chromium-90.0.4430.212]# grep -rn &quot;//printing:printing_unittests&quot;
BUILD.gn:153:      &quot;//printing:printing_unittests&quot;,
BUILD.gn:914:      &quot;//printing:printing_unittests&quot;,</p>
<p>/work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/out/gn gen out/Default</p>
<p>['/path/to/depot_tools', '/usr/lib64/python36.zip', '/usr/lib64/python3.6', '/usr/lib64/python3.6/lib-dynload', '/usr/local/lib/python3.6/site-packages', '/usr/lib64/python3.6/site-packages', '/usr/lib/python3.6/site-packages'] /path/to/depot_tools/ninja -C out/Default chrome -j 18</p>
<p>/path/to/depot_tools /usr/lib64/python36.zip /usr/lib64/python3.6 /usr/lib64/python3.6/lib-dynload   /usr/local/lib/python3.6/site-packages /usr/lib64/python3.6/site-packages   /usr/lib/python3.6/site-packages  /work/bao/git/ninja/ninja -C out/Default chrome -j 18</p>
<p>/work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/out/gn gen out/Default/ --args=' custom_toolchain=&quot;//build/arm64&quot;'</p>
<p>autoninja -C out/Default chrome</p>
<p>gcc: error: unrecognized command line option ‘-mllvm’        yum install llvm-devel
gcc: error: find-bad-constructs: No such file or directory   clang_use_chrome_plugins=false</p>
<p>./configure --prefix=/work/bao/git/test/gcc-install/ <br>
--enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release<br>
--enable-multilib --with-system-zlib --enable-__cxa_atexit --enable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id<br>
--enable-languages=c,c++<br>
--enable-plugin --enable-initfini-array --disable-libgcj --enable-gnu-indirect-function</p>
<p>./configure -enable-languages=c,c++ -enbale-multilib -enable-checking=release</p>
<p>Arm Config for build
源码路径：
src/build/config/arm.gni</p>
<p>../../base/third_party/libevent/buffer.c:42:10: fatal error: sys/types.h: No such file or directory
42 | #include &lt;sys/types.h&gt;
此时想到 gn 的编译往往不用系统的运行时库，而是依赖 chromium 仓库中独立的库。
在 buildtools/third_party/libc++/ 目录下找到了其 BUILD.gn 文件，从而追踪到了 locale.o 的源文件 locale.cpp，在该文件中添加 iswblank 的一行测试代码导致编译失败，此时可以看到编译 release 的详细参数：
————————————————
版权声明：本文为CSDN博主「kph_Hajash」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/chuanglan/article/details/103724473/</p>
<p>arm-linux-gnueabihf</p>
<p>./build/linux/debian_sid_arm-sysroot/usr/include/arm-linux-gnueabihf/</p>
<p>vi out/Default/args.gn</p>
<pre><code>  1 custom_toolchain = &quot;//build/arm64&quot;
  2
  3 current_os = &quot;linux&quot;
  4 current_cpu = &quot;arm64&quot;
  5 is_clang = false
  7 enable_nacl=false
  8 is_debug=false
  9 symbol_level=0
 10 is_component_build=true
 11 use_sysroot = false
</code></pre>
<p>-mfloat-abi=hard</p>
<p>build/config/compiler/BUILD.gn:844:          &quot;-mfloat-abi=$arm_float_abi&quot;,
build/config/compiler/BUILD.gn:1104:          &quot;-mfloat-abi=hard&quot;,</p>
<pre><code>850     } else if (current_cpu == &quot;arm64&quot;) {
851       if (is_clang &amp;&amp; !is_android &amp;&amp; !is_nacl &amp;&amp; !is_fuchsia) {
852         cflags += [ &quot;--target=aarch64-linux-gnu&quot;]
853         ldflags += [ &quot;--target=aarch64-linux-gnu&quot; ]
854       }
855       if (!is_nacl) {               add this
856         cflags += [                add this
857           # &quot;-march=$arm_arch&quot;,    add this
858           &quot;-mfloat-abi=hard&quot;,      add this
859         ]                          add this
860       }
</code></pre>
<p>gnu/stubs.h</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="cm">/* This file selects the right generated file of `__stub_FUNCTION&#39; macros
</span><span class="cm">  based on the architecture being compiled for. */</span>

<span class="cp">#include</span> <span class="cpf">&lt;bits/wordsize.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="cp">#if __WORDSIZE == 32
</span><span class="cp"># include &lt;gnu/stubs-32.h&gt;
</span><span class="cp">#elif __WORDSIZE == 64
</span><span class="cp"># include &lt;gnu/stubs-64.h&gt;
</span><span class="cp">#els
</span><span class="cp"># error &#34;unexpected value for __WORDSIZE macro&#34;
</span><span class="cp">#endif
</span><span class="cp"></span><span class="o">~</span>    
</code></pre></td></tr></table></div>
</div>
</div><div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">FAILED: obj/base/base_static/base_switches.o
/work/bao/git/devrte/runtime/gcc-9.2.0/bin/g++ -MMD -MF obj/base/base_static/base_switches.o.d -DUSE_UDEV -DUSE_AURA<span class="o">=</span><span class="m">1</span> -DUSE_GLIB<span class="o">=</span><span class="m">1</span> -DUSE_NSS_CERTS<span class="o">=</span><span class="m">1</span> -DUSE_OZONE<span class="o">=</span><span class="m">1</span> -DUSE_X11<span class="o">=</span><span class="m">1</span> -D_FILE_OFFSET_BITS<span class="o">=</span><span class="m">64</span> -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE<span class="o">=</span><span class="m">2</span> -DCOMPONENT_BUILD -D_LIBCPP_ABI_UNSTABLE -D_LIBCPP_ABI_VERSION<span class="o">=</span>Cr -D_LIBCPP_ENABLE_NODISCARD -D_LIBCPP_HAS_NO_VENDOR_AVAILABILITY_ANNOTATIONS -DCR_LIBCXX_REVISION<span class="o">=</span>8fa87946779682841e21e2da977eccfb6cb3bded -DCR_SYSROOT_HASH<span class="o">=</span>d20fa0b1c7afe1e67272c9c67837d080ca30d18f -DNDEBUG -DNVALGRIND -DDYNAMIC_ANNOTATIONS_ENABLED<span class="o">=</span><span class="m">0</span> -I../.. -Igen -fno-strict-aliasing --param<span class="o">=</span>ssp-buffer-size<span class="o">=</span><span class="m">4</span> -fstack-protector -funwind-tables -fPIC -pipe -pthread -Wno-builtin-macro-redefined -D__DATE__<span class="o">=</span> -D__TIME__<span class="o">=</span> -D__TIMESTAMP__<span class="o">=</span> -Wall -Werror -Wno-unused-local-typedefs -Wno-maybe-uninitialized -Wno-deprecated-declarations -Wno-comments -Wno-packed-not-aligned -Wno-missing-field-initializers -Wno-unused-parameter -fno-omit-frame-pointer -g0 -fno-builtin-abs -fvisibility<span class="o">=</span>hidden -O2 -fno-ident -fdata-sections -ffunction-sections -std<span class="o">=</span>gnu++14 -Wno-narrowing -Wno-class-memaccess -fno-exceptions -fno-rtti -nostdinc++ -isystem../../buildtools/third_party/libc++/trunk/include -isystem../../buildtools/third_party/libc++abi/trunk/include --sysroot<span class="o">=</span>../../build/linux/debian_sid_arm64-sysroot -fvisibility-inlines-hidden -c ../../base/base_switches.cc -o obj/base/base_static/base_switches.o
In file included from ../../build/linux/debian_sid_arm64-sysroot/usr/include/features.h:485,
                 from ../../build/linux/debian_sid_arm64-sysroot/usr/include/unistd.h:25,
                 from ../../build/build_config.h:70,
                 from ../../base/base_switches.h:10,
                 from ../../base/base_switches.cc:5:
../../build/linux/debian_sid_arm64-sysroot/usr/include/gnu/stubs.h:7:11: fatal error: gnu/stubs-soft.h: No such file or directory
</code></pre></td></tr></table></div>
</div>
</div><div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="mi">7</span> <span class="o">|</span> <span class="err">#</span> <span class="n">include</span> <span class="o">&lt;</span><span class="n">gnu</span><span class="o">/</span><span class="n">stubs</span><span class="o">-</span><span class="n">soft</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>Local changes:
14 - Copied buildtools/third_party/libc++/trunk/src/include/refstring.h to
15   buildtools/third_party/libc++abi/libcxx/src/include/refstring.h to work
16   around <a href="https://llvm.org/PR49313" target="_blank" rel="noopener">https://llvm.org/PR49313</a>
~</p>
<p>./build/linux/debian_sid_arm64-sysroot/usr/include/gnu/stubs.h +7</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++">      <span class="mi">6</span> <span class="err">#</span><span class="k">if</span> <span class="o">!</span><span class="n">defined</span> <span class="n">__ARM_PCS_VFP</span>
      <span class="mi">7</span> <span class="c1">//# include &lt;gnu/stubs-soft.h&gt;              delete this
</span><span class="c1"></span>      <span class="mi">8</span> <span class="err">#</span><span class="n">endif</span>
      <span class="mi">9</span> <span class="err">#</span><span class="k">if</span> <span class="n">defined</span> <span class="n">__ARM_PCS_VFP</span>
     <span class="mi">10</span> <span class="err">#</span> <span class="n">include</span> <span class="o">&lt;</span><span class="n">gnu</span><span class="o">/</span><span class="n">stubs</span><span class="o">-</span><span class="n">hard</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;</span>
     <span class="mi">11</span> <span class="err">#</span><span class="n">endif</span>
</code></pre></td></tr></table></div>
</div>
</div><div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"> error: cast from ‘const char*’ to ‘std::__type_info_implementations::__non_unique_arm_rtti_bit_impl::__type_name_t’ <span class="o">{</span>aka ‘unsigned int’<span class="o">}</span> loses precision <span class="o">[</span>-fpermissive<span class="o">]</span>
  <span class="m">238</span> <span class="p">|</span>       <span class="k">return</span> reinterpret_cast&lt;__type_name_t&gt;<span class="o">(</span>__v<span class="o">)</span><span class="p">;</span>

   error: cast from ‘const char*’ to <span class="o">{</span>aka ‘unsigned int’<span class="o">}</span> loses precision <span class="o">[</span>-fpermissive<span class="o">]</span> reinterpret_cast
</code></pre></td></tr></table></div>
</div>
</div><p>build/config/sysroot.gni +42
vi out/Default/args.gn
add this
use_sysroot = true</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="k">typedef</span> <span class="n">uintptr_t</span> <span class="n">__type_name_t</span><span class="p">;</span>
    <span class="mi">230</span>
    <span class="mi">231</span>     <span class="n">_LIBCPP_INLINE_VISIBILITY</span> <span class="n">_LIBCPP_ALWAYS_INLINE</span>
    <span class="mi">232</span>     <span class="k">static</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">__type_name_to_string</span><span class="p">(</span><span class="n">__type_name_t</span> <span class="n">__v</span><span class="p">)</span> <span class="n">_NOEXCEPT</span> <span class="p">{</span>
    <span class="mi">233</span>       <span class="k">return</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">__v</span> <span class="o">&amp;</span>
    <span class="mi">234</span>           <span class="o">~</span><span class="n">__non_unique_rtti_bit</span><span class="o">::</span><span class="n">value</span><span class="p">);</span>
    <span class="mi">235</span>     <span class="p">}</span>
    <span class="mi">236</span>     <span class="n">_LIBCPP_INLINE_VISIBILITY</span> <span class="n">_LIBCPP_ALWAYS_INLINE</span>
    <span class="mi">237</span>     <span class="k">static</span> <span class="n">__type_name_t</span> <span class="nf">__string_to_type_name</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">__v</span><span class="p">)</span> <span class="n">_NOEXCEPT</span> <span class="p">{</span>
    <span class="mi">238</span>       <span class="k">return</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">__type_name_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">__v</span><span class="p">);</span>
    <span class="mi">239</span>     <span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><p>buildtools/third_party/libc++/trunk/include/typeinfo:155:</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="c1">// This implementation of type_info does not assume always a unique copy of
</span><span class="c1"></span>    <span class="mi">148</span> <span class="c1">// the RTTI for a given type inside a program. It packs the pointer to the
</span><span class="c1"></span>    <span class="mi">149</span> <span class="c1">// type name into a uintptr_t and reserves the high bit of that pointer (which
</span><span class="c1"></span>    <span class="mi">150</span> <span class="c1">// is assumed to be free for use under the ABI in use) to represent whether
</span><span class="c1"></span>    <span class="mi">151</span> <span class="c1">// that specific copy of the RTTI can be assumed unique inside the program.
</span><span class="c1"></span>    <span class="mi">152</span> <span class="c1">// To implement equality-comparison of type_infos, we check whether BOTH
</span><span class="c1"></span>    <span class="mi">153</span> <span class="c1">// type_infos are guaranteed unique, and if so, we simply compare the addresses
</span><span class="c1"></span>    <span class="mi">154</span> <span class="c1">// of their type names instead of doing a deep string comparison, which is
</span><span class="c1"></span>    <span class="mi">155</span> <span class="c1">// faster. If at least one of the type_infos can&#39;t guarantee uniqueness, we
</span><span class="c1"></span>    <span class="mi">156</span> <span class="c1">// have no choice but to fall back to a deep string comparison.
</span><span class="c1"></span>    <span class="mi">157</span> <span class="c1">//
</span><span class="c1"></span>    <span class="mi">158</span> <span class="c1">// This implementation is specific to ARM64 on Apple platforms.
</span><span class="c1"></span>    <span class="mi">159</span> <span class="c1">//
</span><span class="c1"></span>    <span class="mi">160</span> <span class="c1">// Note that the compiler is the one setting (or unsetting) the high bit of
</span><span class="c1"></span>    <span class="mi">161</span> <span class="c1">// the pointer when it constructs the type_info, depending on whether it can
</span><span class="c1"></span>    <span class="mi">162</span> <span class="c1">// guarantee uniqueness for that specific type_info.
</span><span class="c1"></span>    <span class="mi">163</span>
    <span class="mi">164</span> <span class="c1">// This value can be overriden in the __config_site. When it&#39;s not overriden,
</span><span class="c1"></span>    <span class="mi">165</span> <span class="c1">// we pick a default implementation based on the platform here.
</span><span class="c1"></span>

    <span class="mi">228</span>   <span class="k">struct</span> <span class="nc">__non_unique_arm_rtti_bit_impl</span> <span class="p">{</span>
    <span class="mi">229</span>     <span class="c1">//typedef uintptr_t __type_name_t;
</span><span class="c1"></span>    <span class="mi">230</span>     <span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">__type_name_t</span><span class="p">;</span>             <span class="n">change</span> <span class="k">this</span>
    <span class="mi">231</span>
    <span class="mi">232</span>     <span class="n">_LIBCPP_INLINE_VISIBILITY</span> <span class="n">_LIBCPP_ALWAYS_INLINE</span>
    <span class="mi">233</span>     <span class="k">static</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">__type_name_to_string</span><span class="p">(</span><span class="n">__type_name_t</span> <span class="n">__v</span><span class="p">)</span> <span class="n">_NOEXCEPT</span> <span class="p">{</span>
    <span class="mi">234</span>       <span class="k">return</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">__v</span> <span class="o">&amp;</span>
    <span class="mi">235</span>           <span class="o">~</span><span class="n">__non_unique_rtti_bit</span><span class="o">::</span><span class="n">value</span><span class="p">);</span>
    <span class="mi">236</span>     <span class="p">}</span>
    <span class="mi">237</span>     <span class="n">_LIBCPP_INLINE_VISIBILITY</span> <span class="n">_LIBCPP_ALWAYS_INLINE</span>
    <span class="mi">238</span>     <span class="k">static</span> <span class="n">__type_name_t</span> <span class="nf">__string_to_type_name</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">__v</span><span class="p">)</span> <span class="n">_NOEXCEPT</span> <span class="p">{</span>
    <span class="mi">239</span>       <span class="k">return</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">__type_name_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">__v</span><span class="p">);</span>
    <span class="mi">240</span>     <span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><p>atk pangocairo
yum install pango-devel
yum install cairo-devel</p>
<p>atk-bridge-2.0
atk-bridge-2.0 API由at-spi2-atk提供，而不是由ATK提供
yum install at-spi2-atk-devel</p>
<p>gtk+-3.0
yum install gtk3-devel</p>
<p>libgbm
yum install mesa-libgbm-devel</p>
<p>/usr/bin/ld.gold: warning: ignoring --threads: /usr/bin/ld.gold was compiled without thread support
/usr/bin/ld.gold: warning: ignoring --thread-count: /usr/bin/ld.gold was compiled without thread support
vi build/config/compiler/BUILD.gn
64   # Enable fatal linker warnings. Building Chromium with certain versions
65   # of binutils can cause linker warning.
66   # TODO(thakis): Set this to true unconditionally once lld/MachO bring-up
67   # is along far enough that it no longer emits linker warnings.
68   fatal_linker_warnings = !(is_apple &amp;&amp; use_lld)</p>
<hr>
<pre><code>FAILED: obj/v8/cppgc_base/heap-consistency.o
...
In file included from ../../v8/include/cppgc/heap-state.h:8:0,
                 from ../../v8/include/cppgc/internal/write-barrier.h:8,
                 from ../../v8/include/cppgc/heap-consistency.h:10,
                 from ../../v8/src/heap/cppgc/heap-consistency.cc:5:
../../v8/include/v8config.h:466:22: error: expected identifier before ‘[’ token
 #define V8_NODISCARD [[nodiscard]]
</code></pre><p>里面有c++17的语法
vi ./v8/include/v8config.h +466</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"> <span class="c1">// Annotate a class or constructor indicating the caller must assign the
</span><span class="c1"></span> <span class="c1">// constructed instances.
</span><span class="c1"></span> <span class="c1">// Apply to the whole class like:
</span><span class="c1"></span> <span class="c1">//   class V8_NODISCARD Foo() { ... };
</span><span class="c1"></span> <span class="c1">// or apply to just one constructor like:
</span><span class="c1"></span> <span class="c1">//   V8_NODISCARD Foo() { ... };
</span><span class="c1"></span> <span class="c1">// [[nodiscard]] comes in C++17 but supported in clang with -std &gt;= c++11.
</span><span class="c1"></span> <span class="c1">//#if V8_HAS_CPP_ATTRIBUTE_NODISCARD                //注释掉了这三行
</span><span class="c1"></span> <span class="c1">//#define V8_NODISCARD [[nodiscard]]
</span><span class="c1"></span> <span class="c1">//#else
</span></code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">In file included from /usr/include/string.h:636,
                 from ../../buildtools/third_party/libc++/trunk/include/string.h:60,
                 from ../../buildtools/third_party/libc++/trunk/include/cstring:60,
                 from ../../buildtools/third_party/libc++/trunk/include/utility:203,
                 from ../../buildtools/third_party/libc++/trunk/include/memory:674,
                 from ../../buildtools/third_party/libc++/trunk/include/functional:511,
                 from ../../third_party/perfetto/include/perfetto/ext/base/thread_task_runner.h:20,
                 from ../../third_party/perfetto/src/base/thread_task_runner.cc:19:
In <span class="k">function</span> ‘char* strncpy<span class="o">(</span>char*, const char*, size_t<span class="o">)</span>’,
    inlined from ‘bool perfetto::base::MaybeSetThreadName<span class="o">(</span>const string<span class="p">&amp;</span><span class="o">)</span>’ at ../../third_party/perfetto/include/perfetto/ext/base/thread_utils.h:50:10,
    inlined from ‘void perfetto::base::ThreadTaskRunner::RunTaskThread<span class="o">(</span>std::__Cr::function&lt;void<span class="o">(</span>perfetto::base::UnixTaskRunner*<span class="o">)</span>&gt;<span class="o">)</span>’ at ../../third_party/perfetto/src/base/thread_task_runner.cc:85:29:
/usr/include/bits/string3.h:120:34: error: ‘char* __builtin___strncpy_chk<span class="o">(</span>char*, const char*, long unsigned int, long unsigned int<span class="o">)</span>’ output may be truncated copying between <span class="m">1</span> and <span class="m">15</span> bytes from a string of length <span class="m">22</span> <span class="o">[</span>-Werror<span class="o">=</span>stringop-truncation<span class="o">]</span>
  <span class="m">120</span> <span class="p">|</span>   <span class="k">return</span> __builtin___strncpy_chk <span class="o">(</span>__dest, __src, __len, __bos <span class="o">(</span>__dest<span class="o">))</span><span class="p">;</span>
      <span class="p">|</span>          ~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
cc1plus: all warnings being treated as errors
</code></pre></td></tr></table></div>
</div>
</div><pre><code class="language-gn" data-lang="gn">   1630 # chromium_code ---------------------------------------------------------------
   1631 #
   1632 # Toggles between higher and lower warnings for code that is (or isn't)
   1633 # part of Chromium.
   1634
   1635 config(&quot;chromium_code&quot;) {
   1636   if (is_win) {
   1637     cflags = [ &quot;/W4&quot; ]  # Warning level 4.
   1638
   1639     if (is_clang) {
   1640       # Opt in to additional [[nodiscard]] on standard library methods.
   1641       defines = [ &quot;_HAS_NODISCARD&quot; ]
   1642     }
   1643   } else {
   1644     cflags = [ &quot;-Wall&quot; ]
   1645     if (treat_warnings_as_errors) {

######    1646       # cflags += [ &quot;-Werror&quot; ]                                ==change this==
</code></pre><p>./third_party/llvm/compiler-rt/lib/sanitizer_common/sanitizer_stoptheworld_linux_libcdep.cpp:38:#include &lt;sys/user.h&gt;  // for user_regs_struct</p>
<p>/usr/include/user.h</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c">      <span class="mi">1</span> <span class="cm">/* Copyright (C) 2009-2020 Free Software Foundation, Inc.
</span><span class="cm">      2
</span><span class="cm">      3    This file is part of the GNU C Library.
</span><span class="cm">      4
</span><span class="cm">      5    The GNU C Library is free software; you can redistribute it and/or
</span><span class="cm">      6    modify it under the terms of the GNU Lesser General Public License as
</span><span class="cm">      7    published by the Free Software Foundation; either version 2.1 of the
</span><span class="cm">      8    License, or (at your option) any later version.
</span><span class="cm">      9
</span><span class="cm">     10    The GNU C Library is distributed in the hope that it will be useful,
</span><span class="cm">     11    but WITHOUT ANY WARRANTY; without even the implied warranty of
</span><span class="cm">     12    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
</span><span class="cm">     13    Lesser General Public License for more details.
</span><span class="cm">     14
</span><span class="cm">     15    You should have received a copy of the GNU Lesser General Public
</span><span class="cm">     16    License along with the GNU C Library; if not, see
</span><span class="cm">     17    &lt;https://www.gnu.org/licenses/&gt;.  */</span>
     <span class="mi">18</span>
     <span class="mi">19</span> <span class="err">#</span><span class="n">ifndef</span> <span class="n">_SYS_USER_H</span>
     <span class="mi">20</span> <span class="err">#</span><span class="n">define</span> <span class="n">_SYS_USER_H</span>     <span class="mi">1</span>
     <span class="mi">21</span>
     <span class="mi">22</span> <span class="k">struct</span> <span class="n">user_regs_struct</span>
     <span class="mi">23</span> <span class="p">{</span>
     <span class="mi">24</span>   <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">regs</span><span class="p">[</span><span class="mi">31</span><span class="p">];</span>
     <span class="mi">25</span>   <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">sp</span><span class="p">;</span>
     <span class="mi">26</span>   <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">pc</span><span class="p">;</span>
     <span class="mi">27</span>   <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">pstate</span><span class="p">;</span>
     <span class="mi">28</span> <span class="p">};</span>
     <span class="mi">29</span>
     <span class="mi">30</span> <span class="k">struct</span> <span class="n">user_fpsimd_struct</span>
     <span class="mi">31</span> <span class="p">{</span>
     <span class="mi">32</span>   <span class="n">__uint128_t</span>  <span class="n">vregs</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
     <span class="mi">33</span>   <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fpsr</span><span class="p">;</span>
     <span class="mi">34</span>   <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fpcr</span><span class="p">;</span>
     <span class="mi">35</span> <span class="p">};</span>
     <span class="mi">36</span>
     <span class="mi">37</span> <span class="err">#</span><span class="n">endif</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<p>没有<code>node</code></p>
<pre><code>python  ./third_party/node/node.py  ./third_party/devtools-frontend/src/scripts/build/ninja/copy-files.js /work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/third_party/devtools-frontend/src/front_end /work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/out/Default/gen/third_party/devtools-frontend/src/front_end Tests.js,devtools_compatibility.js

['../../third_party/node/linux/node-linux-x64/bin/node', '../../third_party/node/node_modules/rollup/dist/bin/rollup', '/work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/out/Default/gen/chrome/browser/resources/extensions/preprocessed/extensions.js', '--format', 'esm', '--dir', '/work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/out/Default/gen/chrome/browser/resources/extensions/tmpNyLw74', '--entryFileNames', '[name].rollup.js', '--sourcemap', '--sourcemapExcludeSources', '--config', '/work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/out/Default/gen/chrome/browser/resources/extensions/tmpNyLw74/rollup.config.js', '--silent']
</code></pre><h3 id="node不能用"><a href="#node不能用" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:node不能用" class="headings">node不能用</a></h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++">     <span class="mi">13</span> <span class="n">def</span> <span class="nf">GetBinaryPath</span><span class="p">()</span><span class="o">:</span>
     <span class="mi">14</span>   <span class="k">return</span> <span class="n">os_path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">os_path</span><span class="p">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="o">*</span><span class="p">{</span>
     <span class="mi">15</span>     <span class="err">&#39;</span><span class="n">Darwin</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">(</span><span class="err">&#39;</span><span class="n">mac</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">node</span><span class="o">-</span><span class="n">darwin</span><span class="o">-</span><span class="n">x64</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">bin</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">node</span><span class="err">&#39;</span><span class="p">),</span>
     <span class="mi">16</span>     <span class="err">#</span> <span class="err">&#39;</span><span class="n">Linux</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">(</span><span class="err">&#39;</span><span class="n">linux</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">node</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">x64</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">bin</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">node</span><span class="err">&#39;</span><span class="p">),</span>     <span class="o">==</span><span class="n">change</span> <span class="k">this</span><span class="o">==</span>
     <span class="mi">17</span>     <span class="err">&#39;</span><span class="n">Linux</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">(</span><span class="err">&#39;</span><span class="n">linux</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">node</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">bin</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">node</span><span class="err">&#39;</span><span class="p">),</span>
     <span class="mi">18</span>     <span class="err">&#39;</span><span class="n">Windows</span><span class="err">&#39;</span><span class="o">:</span> <span class="p">(</span><span class="err">&#39;</span><span class="n">win</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">node</span><span class="p">.</span><span class="n">exe</span><span class="err">&#39;</span><span class="p">),</span>
     <span class="mi">19</span>   <span class="p">}[</span><span class="n">platform</span><span class="p">.</span><span class="n">system</span><span class="p">()])</span>
     <span class="mi">20</span>
</code></pre></td></tr></table></div>
</div>
</div><div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">ln -sf /work/bao/git/node-v10.16.3-linux-arm64/bin/node /work/bao/chromium/chrom_unrpm/chromium-90/chromium-90.0.4430.212/third_party/node/linux/node/bin/
</code></pre></td></tr></table></div>
</div>
</div><pre><code>FAILED: obj/v8/v8_cppgc_shared/push_registers_asm.o
/work/bao/git/test/gcc-install/bin/g++ -MMD -MF obj/v8/v8_cppgc_shared/push_registers_asm.o.d -DUSE_UDEV -DUSE_AURA=1 -DUSE_GLIB=1 -DUSE_NSS_CERTS=1 -DUSE_OZONE=1 -DUSE_X11=1 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DCOMPONENT_BUILD -D_LIBCPP_ABI_UNSTABLE -D_LIBCPP_ABI_VERSION=Cr -D_LIBCPP_ENABLE_NODISCARD -D_LIBCPP_HAS_NO_VENDOR_AVAILABILITY_ANNOTATIONS -DCR_LIBCXX_REVISION=8fa87946779682841e21e2da977eccfb6cb3bded -DNDEBUG -DNVALGRIND -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DV8_TYPED_ARRAY_MAX_SIZE_IN_HEAP=64 -DENABLE_MINOR_MC -DV8_INTL_SUPPORT -DV8_USE_EXTERNAL_STARTUP_DATA -DV8_ATOMIC_OBJECT_FIELD_WRITES -DV8_ATOMIC_MARKING_STATE -DV8_ENABLE_LAZY_SOURCE_POSITIONS -DV8_WIN64_UNWINDING_INFO -DV8_ENABLE_REGEXP_INTERPRETER_THREADED_DISPATCH -DV8_SNAPSHOT_COMPRESSION -DV8_ENABLE_WEBASSEMBLY -DV8_COMPRESS_POINTERS -DV8_31BIT_SMIS_ON_64BIT_ARCH -DV8_DEPRECATION_WARNINGS -DCPPGC_CAGED_HEAP -DV8_TARGET_ARCH_ARM64 -DV8_HAVE_TARGET_OS -DV8_TARGET_OS_LINUX -DDISABLE_UNTRUSTED_CODE_MITIGATIONS -DBUILDING_V8_SHARED -DV8_COMPRESS_POINTERS -DV8_31BIT_SMIS_ON_64BIT_ARCH -DV8_DEPRECATION_WARNINGS -DCPPGC_CAGED_HEAP -DUSING_V8_BASE_SHARED -I../.. -Igen -I../../v8 -I../../v8/include -Igen/v8 -Igen/v8/include -Igen/v8/include -fno-strict-aliasing --param=ssp-buffer-size=4 -fstack-protector -funwind-tables -fPIC -pipe -pthread -Wno-builtin-macro-redefined -D__DATE__= -D__TIME__= -D__TIMESTAMP__= -Wall -Wno-unused-local-typedefs -Wno-maybe-uninitialized -Wno-deprecated-declarations -Wno-comments -Wno-packed-not-aligned -Wno-missing-field-initializers -Wno-unused-parameter -fno-omit-frame-pointer -g0 -fno-builtin-abs -fvisibility=hidden -Wno-strict-overflow -Wno-return-type -Wno-int-in-bool-context -O3 -fno-ident -fdata-sections -ffunction-sections -std=gnu++14 -Wno-narrowing -Wno-class-memaccess -fno-exceptions -fno-rtti -nostdinc++ -isystem../../buildtools/third_party/libc++/trunk/include -isystem../../buildtools/third_party/libc++abi/trunk/include -fvisibility-inlines-hidden -c ../../v8/src/heap/base/asm/arm64/push_registers_asm.cc -o obj/v8/v8_cppgc_shared/push_registers_asm.o
{standard input}: Assembler messages:
{standard input}:15: Error: operand 1 should be a floating-point register -- `stp fp,lr,[sp,#-16]!'
{standard input}:16: Error: operand 1 should be an integer register -- `mov fp,sp'
{standard input}:20: Error: operand 1 should be an integer register -- `ldr lr,[sp,#8]'
{standard input}:21: Error: operand 1 should be an integer register -- `ldr fp,[sp],#96'
[2595/42232] ACTION //third_party/devtools...rypoint-bundle-rollup(//build/arm64:arm64)
zzzzzzzzzzzzzz
['../../third_party/node/linux/node/bin/node', '../../third_party/devtools-frontend/src/node_modules/rollup/dist/bin/rollup', '--silent', '--plugin', 'terser', '--config', '../../third_party/devtools-frontend/src/front_end/rollup.config.js', '--input', 'gen/third_party/devtools-frontend/src/front_end/ui/ui.prebundle.js', '--file', 'gen/third_party/devtools-frontend/src/front_end/ui/ui.js']
BBBBBBBBBBBB
[2606/42232] ACTION //content/common:mojo_bindings__parser(//build/arm64:arm64)
ninja: build stopped: subcommand failed.
</code></pre><hr>
<pre><code>obj/third_party/angle/angle_glslang_wrapper/glslang_wrapper_utils.o:glslang_wrapper_utils.cpp:function rx::GlslangTransformSpirvCode(std::__Cr::function&lt;angle::Result (rx::GlslangError)&gt; const&amp;, rx::GlslangSpirvOptions const&amp;, rx::ShaderInterfaceVariableInfoMap const&amp;, std::__Cr::vector&lt;unsigned int, std::__Cr::allocator&lt;unsigned int&gt; &gt; const&amp;, std::__Cr::vector&lt;unsigned int, std::__Cr::allocator&lt;unsigned int&gt; &gt;*): error: undefined reference to 'rx::(anonymous namespace)::SpirvTransformFeedbackCodeGenerator::kXfbDecorations'
</code></pre><p>vi third_party/angle/src/libANGLE/renderer/glslang_wrapper_utils.cpp +2119</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"> <span class="k">constexpr</span> <span class="n">size_t</span> <span class="n">SpirvTransformFeedbackCodeGenerator</span><span class="o">::</span><span class="n">kXfbDecorationCount</span><span class="p">;</span>  <span class="c1">//add this
</span><span class="c1"></span> <span class="k">constexpr</span> <span class="n">spv</span><span class="o">::</span><span class="n">Decoration</span> <span class="n">SpirvTransformFeedbackCodeGenerator</span><span class="o">::</span><span class="n">kXfbDecorations</span><span class="p">[</span><span class="n">kXfbDecorationCount</span><span class="p">];</span>   <span class="c1">//add this
</span></code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">FAILED: obj/v8/v8_cppgc_shared/push_registers_asm.o
/work/bao/git/test/gcc-install/bin/g++ -MMD -MF obj/v8/v8_cppgc_shared/push_registers_asm.o.d -DUSE_UDEV -DUSE_AURA<span class="o">=</span><span class="m">1</span> -DUSE_GLIB<span class="o">=</span><span class="m">1</span> -DUSE_NSS_CERTS<span class="o">=</span><span class="m">1</span> -DUSE_OZONE<span class="o">=</span><span class="m">1</span> -DUSE_X11<span class="o">=</span><span class="m">1</span> -D_FILE_OFFSET_BITS<span class="o">=</span><span class="m">64</span> -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE<span class="o">=</span><span class="m">2</span> -DCOMPONENT_BUILD -D_LIBCPP_ABI_UNSTABLE -D_LIBCPP_ABI_VERSION<span class="o">=</span>Cr -D_LIBCPP_ENABLE_NODISCARD -D_LIBCPP_HAS_NO_VENDOR_AVAILABILITY_ANNOTATIONS -DCR_LIBCXX_REVISION<span class="o">=</span>8fa87946779682841e21e2da977eccfb6cb3bded -DNDEBUG -DNVALGRIND -DDYNAMIC_ANNOTATIONS_ENABLED<span class="o">=</span><span class="m">0</span> -DV8_TYPED_ARRAY_MAX_SIZE_IN_HEAP<span class="o">=</span><span class="m">64</span> -DENABLE_MINOR_MC -DV8_INTL_SUPPORT -DV8_USE_EXTERNAL_STARTUP_DATA -DV8_ATOMIC_OBJECT_FIELD_WRITES -DV8_ATOMIC_MARKING_STATE -DV8_ENABLE_LAZY_SOURCE_POSITIONS -DV8_WIN64_UNWINDING_INFO -DV8_ENABLE_REGEXP_INTERPRETER_THREADED_DISPATCH -DV8_SNAPSHOT_COMPRESSION -DV8_ENABLE_WEBASSEMBLY -DV8_COMPRESS_POINTERS -DV8_31BIT_SMIS_ON_64BIT_ARCH -DV8_DEPRECATION_WARNINGS -DCPPGC_CAGED_HEAP -DV8_TARGET_ARCH_ARM64 -DV8_HAVE_TARGET_OS -DV8_TARGET_OS_LINUX -DDISABLE_UNTRUSTED_CODE_MITIGATIONS -DBUILDING_V8_SHARED -DV8_COMPRESS_POINTERS -DV8_31BIT_SMIS_ON_64BIT_ARCH -DV8_DEPRECATION_WARNINGS -DCPPGC_CAGED_HEAP -DUSING_V8_BASE_SHARED -I../.. -Igen -I../../v8 -I../../v8/include -Igen/v8 -Igen/v8/include -Igen/v8/include -fno-strict-aliasing --param<span class="o">=</span>ssp-buffer-size<span class="o">=</span><span class="m">4</span> -fstack-protector -funwind-tables -fPIC -pipe -pthread -Wno-builtin-macro-redefined -D__DATE__<span class="o">=</span> -D__TIME__<span class="o">=</span> -D__TIMESTAMP__<span class="o">=</span> -Wall -Wno-unused-local-typedefs -Wno-maybe-uninitialized -Wno-deprecated-declarations -Wno-comments -Wno-packed-not-aligned -Wno-missing-field-initializers -Wno-unused-parameter -fno-omit-frame-pointer -g0 -fno-builtin-abs -fvisibility<span class="o">=</span>hidden -Wno-strict-overflow -Wno-return-type -Wno-int-in-bool-context -O3 -fno-ident -fdata-sections -ffunction-sections -std<span class="o">=</span>gnu++14 -Wno-narrowing -Wno-class-memaccess -fno-exceptions -fno-rtti -nostdinc++ -isystem../../buildtools/third_party/libc++/trunk/include -isystem../../buildtools/third_party/libc++abi/trunk/include -fvisibility-inlines-hidden -c ../../v8/src/heap/base/asm/arm64/push_registers_asm.cc -o obj/v8/v8_cppgc_shared/push_registers_asm.o
<span class="o">{</span>standard input<span class="o">}</span>: Assembler messages:
<span class="o">{</span>standard input<span class="o">}</span>:15: Error: operand <span class="m">1</span> should be a floating-point register -- <span class="sb">`</span>stp fp,lr,<span class="o">[</span>sp,#-16<span class="o">]</span>!<span class="s1">&#39;
</span><span class="s1">{standard input}:16: Error: operand 1 should be an integer register -- `mov fp,sp&#39;</span>
<span class="o">{</span>standard input<span class="o">}</span>:20: Error: operand <span class="m">1</span> should be an integer register -- <span class="sb">`</span>ldr lr,<span class="o">[</span>sp,#8<span class="o">]</span><span class="s1">&#39;
</span><span class="s1">{standard input}:21: Error: operand 1 should be an integer register -- `ldr fp,[sp],#96&#39;</span>
<span class="o">[</span>18/35519<span class="o">]</span> CXX obj/v8/v8_base_without_compiler/code-generator-arm64.o
</code></pre></td></tr></table></div>
</div>
</div><p>没有解决</p>
<hr>
<p>PushAllRegistersAndIterateStack</p>
<p>PushAllRegistersAndIterateStack(this, visitor, &amp;IteratePointersImpl);</p>
<hr>
<p>ninja</p>
<pre><code>git clone git://github.com/ninja-build/ninja.git &amp;&amp; cd ninja
git checkout release
$ cat README.md

./configure.py --bootstrap
</code></pre><hr>
<pre><code class="language-gn" data-lang="gn">[root@localhost chromium-90.0.4430.212]# cat  build/arm64/BUILD.gn
import(&quot;//build/toolchain/gcc_toolchain.gni&quot;)

gcc_toolchain(&quot;arm64&quot;) {
#  toolchain_args = {
#    current_cpu = &quot;arm64&quot;
#    current_os = &quot;linux&quot;
#  }
#  extra_cflags = &quot;-O2&quot;
#  cc = &quot;/work/bao/git/devrte/runtime/gcc-9.2.0/bin/gcc&quot;
#  cxx = &quot;/work/bao/git/devrte/runtime/gcc-9.2.0/bin/g++&quot;
#
#  ar = &quot;/user/bin/ar&quot;
#  ld = cxx



# toolprefix = &quot;aarch64-unknown-linux-gnu-&quot;
toolprefix = &quot;/work/bao/git/test/gcc-install/bin/&quot;
cc = &quot;${toolprefix}gcc&quot;
cxx = &quot;${toolprefix}g++&quot;
ar = &quot;${toolprefix}gcc-ar&quot;
ld = cxx
nm = &quot;${toolprefix}gcc-nm&quot;

toolchain_args = {
    current_cpu = &quot;arm64&quot;
    current_os = &quot;linux&quot;

     # reclient does not support gcc.
     use_rbe = false
     is_clang = false
   }
}

</code></pre><hr>
<pre><code>FAILED: obj/third_party/angle/translator/ReplaceForShaderFramebufferFetch.o
/usr/bin/g++ -MMD -MF 
obj/third_party/angle/translator/ReplaceForShaderFramebufferFetch.o.d -DANGLE_ENABLE_ESSL -DANGLE_ENABLE_GLSL -DANGLE_ENABLE_VULKAN -DANGLE_ENABLE_SWIFTSHADER -DUSE_UDEV -DUSE_AURA=1 -DUSE_GLIB=1 -DUSE_NSS_CERTS=1 -DUSE_OZONE=1 -DUSE_X11=1 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D_FORTIFY_SOURCE=2 -DCOMPONENT_BUILD -D_LIBCPP_ABI_UNSTABLE -D_LIBCPP_ABI_VERSION=Cr -D_LIBCPP_ENABLE_NODISCARD -D_LIBCPP_HAS_NO_VENDOR_AVAILABILITY_ANNOTATIONS -DCR_LIBCXX_REVISION=8fa87946779682841e21e2da977eccfb6cb3bded -DCR_SYSROOT_HASH=92dd6b554df680bd27110d06ae3fc21fa5fd6588 -DNDEBUG -DNVALGRIND -DDYNAMIC_ANNOTATIONS_ENABLED=0 -DANGLE_IS_64_BIT_CPU -DANGLE_IS_LINUX -I../../third_party/angle/include -I../../third_party/angle/src -I../../third_party/angle/include -I../../third_party/angle/src/common/third_party/base -Igen/angle -I../../third_party/angle/include -fno-strict-aliasing --param=ssp-buffer-size=4 -fstack-protector -funwind-tables -fPIC -pipe -pthread -m64 -march=x86-64 -msse3 -Wno-builtin-macro-redefined -D__DATE__= -D__TIME__= -D__TIMESTAMP__= -Wall -Werror -Wno-unused-local-typedefs -Wno-maybe-uninitialized -Wno-deprecated-declarations -Wno-comments -Wno-packed-not-aligned -Wno-missing-field-initializers -Wno-unused-parameter -O2 -fno-ident -fdata-sections -ffunction-sections -fno-omit-frame-pointer -g0 -fno-builtin-abs -fvisibility=hidden -std=gnu++14 -Wno-narrowing -Wno-class-memaccess -fno-exceptions -fno-rtti -nostdinc++ -isystem../../buildtools/third_party/libc++/trunk/include -isystem../../buildtools/third_party/libc++abi/trunk/include --sysroot=../../build/linux/debian_sid_amd64-sysroot -fvisibility-inlines-hidden -c ../../third_party/angle/src/compiler/translator/tree_ops/vulkan/ReplaceForShaderFramebufferFetch.cpp -o obj/third_party/angle/translator/ReplaceForShaderFramebufferFetch.o
../../third_party/angle/src/compiler/translator/tree_ops/vulkan/ReplaceForShaderFramebufferFetch.cpp:459:17: error: ‘sh::ImmutableString sh::{anonymous}::ReplaceSubpassInputUtils::getInputAttachmentArrayName()’ defined but not used [-Werror=unused-function]
 ImmutableString ReplaceSubpassInputUtils::getInputAttachmentArrayName()
                 ^~~~~~~~~~~~~~~~~~~~~~~~
cc1plus: error: unrecognized command line option ‘-Wno-class-memaccess’ [-Werror]
cc1plus: error: unrecognized command line option ‘-Wno-packed-not-aligned’ [-Werror]
cc1plus: all warnings being treated as errors
[5/48628] CXX obj/third_party/angle/translator/OutputGLSLBase.o
ninja: build stopped: subcommand failed.
</code></pre><div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++">    <span class="mi">458</span> <span class="cm">/*
</span><span class="cm">    459 ImmutableString ReplaceSubpassInputUtils::getInputAttachmentArrayName()
</span><span class="cm">    460 {
</span><span class="cm">    461     constexpr ImmutableString suffix(&#34;Array&#34;);
</span><span class="cm">    462     std::stringstream nameStream = sh::InitializeStream&lt;std::stringstream&gt;();
</span><span class="cm">    463     nameStream &lt;&lt; sh::vk::kInputAttachmentName &lt;&lt; suffix &lt;&lt; mInputAttachmentArra        yIdSeq++;
</span><span class="cm">    464     return ImmutableString(nameStream.str());
</span><span class="cm">    465 }
</span><span class="cm">    466 */</span>

</code></pre></td></tr></table></div>
</div>
</div><hr>
<p>../../third_party/pdfium/core/fxcodec/jpx/cjpx_decoder.cpp:73:10: error: could not convert ‘data’ from ‘fxcodec::{anonymous}::OpjImageRgbData’ to ‘Optional<a href="fxcodec::%7Banonymous%7D::OpjImageRgbData">fxcodec::{anonymous}::OpjImageRgbData</a> {aka pdfium::Optional<a href="fxcodec::%7Banonymous%7D::OpjImageRgbData">fxcodec::{anonymous}::OpjImageRgbData</a>}’</p>
<p>vi ./third_party/pdfium/core/fxcodec/jpx/cjpx_decoder.cpp +73</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++">     <span class="mi">59</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">OpjImageRgbData</span><span class="o">&gt;</span> <span class="n">alloc_rgb</span><span class="p">(</span><span class="n">size_t</span> <span class="n">size</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">//OpjImageRgbData data;  change this
</span><span class="c1"></span>     <span class="mi">60</span>   <span class="n">Optional</span><span class="o">&lt;</span><span class="n">OpjImageRgbData</span><span class="o">&gt;</span> <span class="n">data</span><span class="p">;</span>
          <span class="c1">//data.r.reset(static_cast&lt;int*&gt;(opj_image_data_alloc(size)));
</span><span class="c1"></span>     <span class="mi">61</span>   <span class="n">data</span><span class="p">.</span><span class="n">value</span><span class="p">().</span><span class="n">r</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">opj_image_data_alloc</span><span class="p">(</span><span class="n">size</span><span class="p">)));</span>
          <span class="c1">//if(!data.r)
</span><span class="c1"></span>     <span class="mi">62</span>   <span class="nf">if</span> <span class="p">(</span><span class="o">!</span><span class="n">data</span><span class="p">.</span><span class="n">value</span><span class="p">().</span><span class="n">r</span><span class="p">)</span>
     <span class="mi">63</span>     <span class="k">return</span> <span class="p">{};</span>
     <span class="mi">64</span>
          <span class="c1">//
</span><span class="c1"></span>     <span class="mi">65</span>   <span class="n">data</span><span class="p">.</span><span class="n">value</span><span class="p">().</span><span class="n">g</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">opj_image_data_alloc</span><span class="p">(</span><span class="n">size</span><span class="p">)));</span>
          <span class="c1">//
</span><span class="c1"></span>     <span class="mi">66</span>   <span class="nf">if</span> <span class="p">(</span><span class="o">!</span><span class="n">data</span><span class="p">.</span><span class="n">value</span><span class="p">().</span><span class="n">g</span><span class="p">)</span>
     <span class="mi">67</span>     <span class="k">return</span> <span class="p">{};</span>
     <span class="mi">68</span>   
          <span class="c1">//
</span><span class="c1"></span>     <span class="mi">69</span>   <span class="n">data</span><span class="p">.</span><span class="n">value</span><span class="p">().</span><span class="n">b</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">opj_image_data_alloc</span><span class="p">(</span><span class="n">size</span><span class="p">)));</span>
          <span class="c1">//
</span><span class="c1"></span>     <span class="mi">70</span>   <span class="nf">if</span> <span class="p">(</span><span class="o">!</span><span class="n">data</span><span class="p">.</span><span class="n">value</span><span class="p">().</span><span class="n">b</span><span class="p">)</span>
     <span class="mi">71</span>     <span class="k">return</span> <span class="p">{};</span>
     <span class="mi">72</span>
     <span class="mi">73</span>   <span class="k">return</span> <span class="n">data</span><span class="p">;</span>
     <span class="mi">74</span> <span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">python <span class="s2">&#34;../../build/toolchain/gcc_solink_wrapper.py&#34;</span> --readelf<span class="o">=</span><span class="s2">&#34;readelf&#34;</span> --nm<span class="o">=</span><span class="s2">&#34;/usr/bin/nm&#34;</span>  --sofile<span class="o">=</span><span class="s2">&#34;./libcloud_policy_proto_generated_compile.so&#34;</span> --tocfile<span class="o">=</span><span class="s2">&#34;./libcloud_policy_proto_generated_compile.so.TOC&#34;</span> --output<span class="o">=</span><span class="s2">&#34;./libcloud_policy_proto_generated_compile.so&#34;</span> -- /usr/bin/g++ -shared -Wl,-soname<span class="o">=</span><span class="s2">&#34;libcloud_policy_proto_generated_compile.so&#34;</span> -Wl,--fatal-warnings -Wl,--build-id -fPIC -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,defs -Wl,--as-needed -fuse-ld<span class="o">=</span>gold -Wl,--threads -Wl,--thread-count<span class="o">=</span><span class="m">4</span> -m64 -Werror -lprotobuf -Wl,-O2 -Wl,--gc-sections -rdynamic -nodefaultlibs --sysroot<span class="o">=</span>../../build/linux/debian_sid_amd64-sysroot -L../../build/linux/debian_sid_amd64-sysroot/usr/local/lib/x86_64-linux-gnu -L../../build/linux/debian_sid_amd64-sysroot/lib/x86_64-linux-gnu -L../../build/linux/debian_sid_amd64-sysroot/usr/lib/x86_64-linux-gnu -Wl,-rpath<span class="o">=</span><span class="se">\$</span>ORIGIN -o <span class="s2">&#34;./libcloud_policy_proto_generated_compile.so&#34;</span> @<span class="s2">&#34;./libcloud_policy_proto_generated_compile.so.rsp&#34;</span>



obj/components/policy/proto/libpolicy_common_definitions_compile_proto.a<span class="o">(</span>obj/components/policy/proto/policy_common_definitions_compile_proto/policy_common_definitions.pb.o<span class="o">)</span>:policy_common_definitions.pb.cc:function enterprise_management::StringList::ByteSizeLong<span class="o">()</span> const: error: undefined reference to <span class="s1">&#39;google::protobuf::RepeatedPtrField
</span><span class="s1">&lt;std::__Cr::basic_string&lt;char, std::__Cr::char_traits&lt;char&gt;, std::__Cr::allocator&lt;char&gt; &gt; &gt;::size() const&#39;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>打了个patch就好了</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">patch -p1 &lt;../../chromium-78-protobuf-RepeatedPtrField-export.patch
</code></pre></td></tr></table></div>
</div>
</div><p>patch里面的内容是：</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="gh">diff --git a/third_party/protobuf/src/google/protobuf/repeated_field.h b/third_party/protobuf/src/google/protobuf/repeated_field.h
</span><span class="gh">index b5b193c..4434854 100644
</span><span class="gh"></span><span class="gd">--- a/third_party/protobuf/src/google/protobuf/repeated_field.h
</span><span class="gd"></span><span class="gi">+++ b/third_party/protobuf/src/google/protobuf/repeated_field.h
</span><span class="gi"></span><span class="gu">@@ -804,7 +804,7 @@ class StringTypeHandler {
</span><span class="gu"></span> // RepeatedPtrField is like RepeatedField, but used for repeated strings or
 // Messages.
 template &lt;typename Element&gt;
<span class="gd">-class RepeatedPtrField final : private internal::RepeatedPtrFieldBase {
</span><span class="gd"></span><span class="gi">+class PROTOBUF_EXPORT RepeatedPtrField final : private internal::RepeatedPtrFieldBase {
</span><span class="gi"></span>  public:
   RepeatedPtrField();
   explicit RepeatedPtrField(Arena* arena);
</code></pre></td></tr></table></div>
</div>
</div><hr>
<p>没有<code>gperf</code></p>
<pre><code>subprocess.CalledProcessError: Command '['gperf', '--key-positions=*', '-P', '-n', '-m', '50', '-D']' returned non-zero exit status 127
</code></pre><p>下载一个</p>
<pre><code>http://ftp.gnu.org/pub/gnu/gperf/gperf-3.1.tar.gz
tar -xvf gperf-3.1.tar.gz
cd gperf-3.1
./configure
make &amp;&amp; make install
</code></pre><hr>
<pre><code>FAILED: gen/third_party/devtools-frontend/src/front_end/devtools_app.html gen/third_party/devtools-frontend/src/front_end/inspector.html gen/third_party/devtools-frontend/src/front_end/js_app.html gen/third_party/devtools-frontend/src/front_end/ndb_app.html gen/third_party/devtools-frontend/src/front_end/node_app.html gen/third_party/devtools-frontend/src/front_end/toolbox.html gen/third_party/devtools-frontend/src/front_end/worker_app.html
python ../../third_party/node/node.py ../../third_party/devtools-frontend/src/scripts/build/generate_html_entrypoint.js --template ../../third_party/devtools-frontend/src/front_end/entrypoint_template.html --out-directory gen/third_party/devtools-frontend/src/front_end
++++++++
('%s', ['../../third_party/node/linux/node-linux-x64/bin/node', '../../third_party/devtools-frontend/src/scripts/build/generate_html_entrypoint.js', '--template', '../../third_party/devtools-frontend/src/front_end/entrypoint_template.html', '--out-directory', 'gen/third_party/devtools-frontend/src/front_end'])
++++++++
Traceback (most recent call last):
  File &quot;../../third_party/node/node.py&quot;, line 47, in &lt;module&gt;
    RunNode(sys.argv[1:])
  File &quot;../../third_party/node/node.py&quot;, line 27, in RunNode
    cmd, cwd=os.getcwd(), stdout=subprocess.PIPE, stderr=subprocess.PIPE)
  File &quot;/usr/lib64/python2.7/subprocess.py&quot;, line 394, in __init__
    errread, errwrite)
  File &quot;/usr/lib64/python2.7/subprocess.py&quot;, line 1047, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory
[6/43218] CXX x64/obj/third_party/protobuf/protobuf_full/proto_writer.o
ninja: build stopped: subcommand failed.
</code></pre><pre><code>++++++++
('%s', ['../../third_party/node/linux/node-linux-x64/bin/node', '../../third_party/devtools-frontend/src/scripts/build/generate_html_entrypoint.js', '--template', '../../third_party/devtools-frontend/src/front_end/entrypoint_template.html', '--out-directory', 'gen/third_party/devtools-frontend/src/front_end'])
++++++++

这里目录的名字node-linux-x64注意一下，路径找不到bin/node
</code></pre><pre><code>vi out/Default/obj//components/policy/proto/policy_common_definitions_compile_proto.ninja
去掉Werror
</code></pre><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">python <span class="s2">&#34;../../build/toolchain/gcc_solink_wrapper.py&#34;</span> --readelf<span class="o">=</span><span class="s2">&#34;readelf&#34;</span> --nm<span class="o">=</span><span class="s2">&#34;/usr/bin/nm&#34;</span>  --sofile<span class="o">=</span><span class="s2">&#34;./libGLESv2.so&#34;</span> --tocfile<span class="o">=</span><span class="s2">&#34;./libGLESv2.so.TOC&#34;</span> --output<span class="o">=</span><span class="s2">&#34;./libGLESv2.so&#34;</span> -- /usr/bin/g++ -shared -Wl,-soname<span class="o">=</span><span class="s2">&#34;libGLESv2.so&#34;</span> -Wl,--fatal-warnings -Wl,--build-id -fPIC -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,defs -Wl,--as-needed -fuse-ld<span class="o">=</span>gold -Wl,--threads -Wl,--thread-count<span class="o">=</span><span class="m">4</span> -m64 -Werror -Wl,-O2 -Wl,--gc-sections -rdynamic -nodefaultlibs --sysroot<span class="o">=</span>../../build/linux/debian_sid_amd64-sysroot -L../../build/linux/debian_sid_amd64-sysroot/usr/local/lib/x86_64-linux-gnu -L../../build/linux/debian_sid_amd64-sysroot/lib/x86_64-linux-gnu -L../../build/linux/debian_sid_amd64-sysroot/usr/lib/x86_64-linux-gnu -Wl,-rpath<span class="o">=</span><span class="se">\$</span>ORIGIN -o <span class="s2">&#34;./libGLESv2.so&#34;</span> @<span class="s2">&#34;./libGLESv2.so.rsp&#34;</span>

/usr/bin/ld.gold: error: obj/third_party/angle/angle_glslang_wrapper/glslang_wrapper_utils.o: requires dynamic R_X86_64_PC32 reloc against <span class="s1">&#39;_ZN2rx12_GLOBAL__N_135SpirvTransformFeedbackCodeGenerator15kXfbDecorationsE&#39;</span> which may overflow at runtime<span class="p">;</span> recompile with -fPIC

obj/third_party/angle/angle_glslang_wrapper/glslang_wrapper_utils.o:glslang_wrapper_utils.cpp:function rx::GlslangTransformSpirvCode<span class="o">(</span>std::__Cr::function&lt;angle::Result <span class="o">(</span>rx::GlslangError<span class="o">)</span>&gt; const<span class="p">&amp;</span>, rx::GlslangSpirvOptions const<span class="p">&amp;</span>, rx::ShaderInterfaceVariableInfoMap const<span class="p">&amp;</span>, std::__Cr::vector&lt;unsigned int, std::__Cr::allocator&lt;unsigned int&gt; &gt; const<span class="p">&amp;</span>, std::__Cr::vector&lt;unsigned int, std::__Cr::allocator&lt;unsigned int&gt; &gt;*<span class="o">)</span>: error: undefined reference to <span class="s1">&#39;rx::(anonymous namespace)::SpirvTransformFeedbackCodeGenerator::kXfbDecorations&#39;</span>

obj/third_party/angle/angle_glslang_wrapper/glslang_wrapper_utils.o:glslang_wrapper_utils.cpp:function 
rx::GlslangTransformSpirvCode<span class="o">(</span>std::__Cr::function&lt;angle::Result <span class="o">(</span>
rx::GlslangError<span class="o">)</span>&gt; const<span class="p">&amp;</span>, 
rx::GlslangSpirvOptions const<span class="p">&amp;</span>, 
rx::ShaderInterfaceVariableInfoMap const<span class="p">&amp;</span>, std::__Cr::vector&lt;unsigned int, std::__Cr::allocator&lt;unsigned int&gt; &gt; const<span class="p">&amp;</span>, std::__Cr::vector&lt;unsigned int, std::__Cr::allocator&lt;unsigned int&gt; &gt;*<span class="o">)</span>
: error: undefined reference to <span class="s1">&#39;rx::(anonymous namespace)::SpirvTransformFeedbackCodeGenerator::kXfbDecorations&#39;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vi ./third_party/angle/src/libANGLE/renderer/glslang_wrapper_utils.cpp +4540</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="m">4538</span> constexpr size_t SpirvTransformFeedbackCodeGenerator::kXfbDecorationCount<span class="p">;</span>  add this 
<span class="m">4539</span> constexpr spv::Decoration pirvTransformFeedbackCodeGenerator::kXfbDecorations<span class="o">[</span>kXfbDecorationCount<span class="o">]</span><span class="p">;</span>   add this
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">../../third_party/pdfium/xfa/fxfa/fm2js/cxfa_fmexpression.cpp: In member <span class="k">function</span> ‘Optional&lt;CFX_WideTextBuf&gt; CXFA_FMAST::ToJavaScript<span class="o">()</span> const’:
../../third_party/pdfium/xfa/fxfa/fm2js/cxfa_fmexpression.cpp:781:12: error: could not convert ‘js’ from ‘CFX_WideTextBuf’ to ‘Optional&lt;CFX_WideTextBuf&gt; <span class="o">{</span>aka pdfium::Optional&lt;CFX_WideTextBuf&gt;<span class="o">}</span>’
</code></pre></td></tr></table></div>
</div>
</div><p>vi third_party/pdfium/pdfium.gni +48</p>
<pre><code class="language-gni" data-lang="gni">
  # Build PDFium either with or without XFA Forms support.
  # pdf_enable_xfa = pdf_enable_xfa_override
  pdf_enable_xfa = false			# change this
</code></pre><hr>
<p>去掉烦人的Werror报错</p>
<pre><code class="language-gn" data-lang="gn">[root@localhost chromium-90.0.4430.212]# grep -rn &quot;Werror&quot; build/config/compiler/
build/config/compiler/BUILD.gn:1645:      cflags += [ &quot;-Werror&quot; ]
build/config/compiler/BUILD.gn:1650:      ldflags = [ &quot;-Werror&quot; ]
build/config/compiler/BUILD.gn:1735:    # GCC may emit unsuppressible warnings so don't add -Werror for no chromium
build/config/compiler/BUILD.gn:1738:      cflags += [ &quot;-Werror&quot; ]
build/config/compiler/BUILD.gn:1739:      ldflags = [ &quot;-Werror&quot; ]
[root@localhost chromium-90.0.4430.212]# vi build/config/compiler/BUILD.gn +1645
[root@localhost chromium-90.0.4430.212]# vi build/config/compiler/BUILD.gn +1735
[root@localhost chromium-90.0.4430.212]# vi build/config/compiler/BUILD.gn +1738
</code></pre><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">../../components/services/storage/dom_storage/legacy_dom_storage_database.cc: In member <span class="k">function</span> ‘bool storage::LegacyDomStorageDatabase::LazyOpen<span class="o">(</span>bool<span class="o">)</span>’:
../../components/services/storage/dom_storage/legacy_dom_storage_database.cc:162:24: sorry, unimplemented: non-trivial designated initializers not supported
       .cache_size <span class="o">=</span> 500<span class="o">})</span><span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><p><a href="https://blog.csdn.net/zuicong5568/article/details/77944474" target="_blank" rel="noopener">https://blog.csdn.net/zuicong5568/article/details/77944474</a></p>
<p>vi ./components/services/storage/dom_storage/legacy_dom_storage_database.cc +162</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++">  <span class="n">db_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">sql</span><span class="o">::</span><span class="n">Database</span><span class="o">&gt;</span><span class="p">(</span><span class="n">sql</span><span class="o">::</span><span class="n">DatabaseOptions</span><span class="p">{</span>
      <span class="c1">// This database should only be accessed from the process hosting the
</span><span class="c1"></span>      <span class="c1">// storage service, so exclusive locking is appropriate.
</span><span class="c1"></span>      <span class="p">.</span><span class="n">exclusive_locking</span> <span class="o">=</span> <span class="nb">true</span><span class="p">,</span>
      <span class="p">.</span><span class="n">wal_mode</span> <span class="o">=</span> <span class="n">base</span><span class="o">::</span><span class="n">FeatureList</span><span class="o">::</span><span class="n">IsEnabled</span><span class="p">(</span><span class="n">sql</span><span class="o">::</span><span class="n">features</span><span class="o">::</span><span class="n">kEnableWALModeByDefault</span><span class="p">),</span>  <span class="c1">//ADD THIS
</span><span class="c1"></span>      <span class="p">.</span><span class="n">page_size</span> <span class="o">=</span> <span class="mi">4096</span><span class="p">,</span>
      <span class="p">.</span><span class="n">cache_size</span> <span class="o">=</span> <span class="mi">500</span><span class="p">});</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">../../base/containers/flat_tree.h:150:23: error: uninitialized variable ‘extractor’ in ‘constexpr’ <span class="k">function</span>
       GetKeyFromValue extractor<span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vi ./base/containers/flat_tree.h +153</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++">	 <span class="k">struct</span> <span class="nc">value_compare</span> <span class="p">{</span>
     <span class="k">constexpr</span> <span class="kt">bool</span> <span class="nf">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">value_type</span><span class="o">&amp;</span> <span class="n">left</span><span class="p">,</span>		
                              <span class="k">const</span> <span class="n">value_type</span><span class="o">&amp;</span> <span class="n">right</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
<span class="c1">//      GetKeyFromValue extractor;  CHANGE THIS 
</span><span class="c1"></span>      <span class="n">GetKeyFromValue</span> <span class="n">extractor</span> <span class="o">=</span> <span class="n">GetKeyFromValue</span><span class="p">();</span>	<span class="c1">//ADD THIS
</span><span class="c1"></span>      <span class="k">return</span> <span class="n">comp</span><span class="p">(</span><span class="n">extractor</span><span class="p">(</span><span class="n">left</span><span class="p">),</span> <span class="n">extractor</span><span class="p">(</span><span class="n">right</span><span class="p">));</span>
    <span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">../../components/blocklist/opt_out_blocklist/sql/opt_out_store_sql.cc: In member <span class="k">function</span> ‘virtual void blocklist::OptOutStoreSQL::LoadBlockList<span class="o">(</span>std::__Cr::unique_ptr&lt;blocklist::BlocklistData&gt;, blocklist::LoadBlockListCallback<span class="o">)</span>’:
../../components/blocklist/opt_out_blocklist/sql/opt_out_store_sql.cc:402:26: sorry, unimplemented: non-trivial designated initializers not supported
         .cache_size <span class="o">=</span> 250<span class="o">})</span><span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vi ./components/blocklist/opt_out_blocklist/sql/opt_out_store_sql.cc +402</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">db_</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">db_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">sql</span><span class="o">::</span><span class="n">Database</span><span class="o">&gt;</span><span class="p">(</span><span class="n">sql</span><span class="o">::</span><span class="n">DatabaseOptions</span><span class="p">{</span>
        <span class="p">.</span><span class="n">exclusive_locking</span> <span class="o">=</span> <span class="nb">true</span><span class="p">,</span>
        <span class="c1">// The entry size should be between 11 and 10 + x bytes, where x is the
</span><span class="c1"></span>        <span class="c1">// the length of the host name string in bytes.
</span><span class="c1"></span>        <span class="c1">// The total number of entries per host is bounded at 32, and the total
</span><span class="c1"></span>        <span class="c1">// number of hosts is currently unbounded (but typically expected to be
</span><span class="c1"></span>        <span class="c1">// under 100). Assuming average of 100 bytes per entry, and 100 hosts,
</span><span class="c1"></span>        <span class="c1">// the total size will be 4096 * 78. 250 allows room for extreme cases
</span><span class="c1"></span>        <span class="c1">// such as many host names or very long host names. The average case
</span><span class="c1"></span>        <span class="c1">// should be much smaller as users rarely visit hosts that are not in
</span><span class="c1"></span>        <span class="c1">// their top 20 hosts. It should be closer to 32 * 100 * 20 for most
</span><span class="c1"></span>        <span class="c1">// users, which is about 4096 * 15. The total size of the database will
</span><span class="c1"></span>        <span class="c1">// be capped at 3200 entries.
</span><span class="c1"></span>        <span class="p">.</span><span class="n">wal_mode</span> <span class="o">=</span> <span class="n">base</span><span class="o">::</span><span class="n">FeatureList</span><span class="o">::</span><span class="n">IsEnabled</span><span class="p">(</span><span class="n">sql</span><span class="o">::</span><span class="n">features</span><span class="o">::</span><span class="n">kEnableWALModeByDefault</span><span class="p">),</span>	<span class="c1">//ADD THIS
</span><span class="c1"></span>        <span class="p">.</span><span class="n">page_size</span> <span class="o">=</span> <span class="mi">4096</span><span class="p">,</span>
        <span class="p">.</span><span class="n">cache_size</span> <span class="o">=</span> <span class="mi">250</span><span class="p">});</span>
  <span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">./components/policy/core/common/registry_dict.cc: In <span class="k">function</span> ‘base::Optional&lt;base::Value&gt; policy::ConvertRegistryValue<span class="o">(</span>const base::Value<span class="p">&amp;</span>, const policy::Schema<span class="p">&amp;</span><span class="o">)</span>’:
../../components/policy/core/common/registry_dict.cc:53:14: error: could not convert ‘result’ from ‘base::Value’ to ‘base::Optional&lt;base::Value&gt;’
       <span class="k">return</span> result<span class="p">;</span>
              ^~~~~~
../../components/policy/core/common/registry_dict.cc:62:14: error: could not convert ‘result’ from ‘base::Value’ to ‘base::Optional&lt;base::Value&gt;’
       <span class="k">return</span> result<span class="p">;</span>
              ^~~~~~
../../components/policy/core/common/registry_dict.cc:115:16: error: could not convert ‘result’ from ‘base::Value’ to ‘base::Optional&lt;base::Value&gt;’
         <span class="k">return</span> result<span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vi ./components/policy/core/common/registry_dict.cc +53</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++">	 <span class="mi">43</span>		<span class="nf">if</span> <span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">schema</span><span class="p">.</span><span class="n">type</span><span class="p">())</span> <span class="p">{</span>
     <span class="mi">44</span>     <span class="c1">// Recurse for complex types.
</span><span class="c1"></span>     <span class="mi">45</span>     <span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="n">is_dict</span><span class="p">())</span> <span class="p">{</span>
     <span class="mi">46</span>       <span class="c1">//base::Value result(base::Value::Type::DICTIONARY); //CHANGE THIS
</span><span class="c1"></span>     <span class="mi">47</span>       <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">Value</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">(</span><span class="n">base</span><span class="o">::</span><span class="n">Value</span><span class="o">::</span><span class="n">Type</span><span class="o">::</span><span class="n">DICTIONARY</span><span class="p">);</span>
     <span class="mi">48</span>       <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">entry</span> <span class="p">:</span> <span class="n">value</span><span class="p">.</span><span class="n">DictItems</span><span class="p">())</span> <span class="p">{</span>
     <span class="mi">49</span>         <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">Value</span><span class="o">&gt;</span> <span class="n">converted</span> <span class="o">=</span>
     <span class="mi">50</span>             <span class="n">ConvertRegistryValue</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="n">second</span><span class="p">,</span> <span class="n">schema</span><span class="p">.</span><span class="n">GetProperty</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="n">first</span><span class="p">));</span>
     <span class="mi">51</span>         <span class="k">if</span> <span class="p">(</span><span class="n">converted</span><span class="p">.</span><span class="n">has_value</span><span class="p">())</span>
     <span class="mi">52</span>           <span class="n">result</span><span class="p">.</span><span class="n">value</span><span class="p">().</span><span class="n">SetKey</span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="n">first</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">converted</span><span class="p">.</span><span class="n">value</span><span class="p">()));</span> <span class="c1">//这里加了.value()
</span><span class="c1"></span>     <span class="mi">53</span>       <span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">../../components/policy/core/common/schema.cc: In static member <span class="k">function</span> ‘static base::Optional&lt;base::Value&gt; policy::Schema::ParseToDictAndValidate<span class="o">(</span>const string<span class="p">&amp;</span>, int, std::__Cr::string*<span class="o">)</span>’:
../../components/policy/core/common/schema.cc:1441:10: error: could not convert ‘json’ from ‘base::Value’ to ‘base::Optional&lt;base::Value&gt;’
   <span class="k">return</span> json<span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vi ./components/policy/core/common/schema.cc +1441</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">Value</span><span class="o">&gt;</span> <span class="n">Schema</span><span class="o">::</span><span class="n">ParseToDictAndValidate</span><span class="p">(</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">schema</span><span class="p">,</span>
    <span class="kt">int</span> <span class="n">validator_options</span><span class="p">,</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">*</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">base</span><span class="o">::</span><span class="n">JSONReader</span><span class="o">::</span><span class="n">ValueWithError</span> <span class="n">value_with_error</span> <span class="o">=</span>
      <span class="n">base</span><span class="o">::</span><span class="n">JSONReader</span><span class="o">::</span><span class="n">ReadAndReturnValueWithError</span><span class="p">(</span>
          <span class="n">schema</span><span class="p">,</span> <span class="n">base</span><span class="o">::</span><span class="n">JSONParserOptions</span><span class="o">::</span><span class="n">JSON_ALLOW_TRAILING_COMMAS</span><span class="p">);</span>
  <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="n">value_with_error</span><span class="p">.</span><span class="n">error_message</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">value_with_error</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">base</span><span class="o">::</span><span class="n">nullopt</span><span class="p">;</span>
  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">Value</span><span class="o">&gt;</span> <span class="n">json</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">value_with_error</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">value</span><span class="p">());</span><span class="c1">//CHANGE THIS 加了base::Optional&lt;&gt;
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">json</span><span class="p">.</span><span class="n">value</span><span class="p">().</span><span class="n">is_dict</span><span class="p">())</span> <span class="p">{</span>		<span class="c1">// ADD value()
</span><span class="c1"></span>    <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="s">&#34;Schema must be a JSON object&#34;</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">base</span><span class="o">::</span><span class="n">nullopt</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IsValidSchema</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">value</span><span class="p">(),</span> <span class="n">validator_options</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span> <span class="c1">//ADD value()
</span><span class="c1"></span>    <span class="k">return</span> <span class="n">base</span><span class="o">::</span><span class="n">nullopt</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">json</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">./components/favicon/core/favicon_database.cc:256:29: sorry, unimplemented: non-trivial designated initializers not supported
            .cache_size <span class="o">=</span> 32<span class="o">})</span> <span class="o">{}</span>
                             ^
../../components/favicon/core/favicon_database.cc:256:29: sorry, unimplemented: non-trivial designated initializers not supported
</code></pre></td></tr></table></div>
</div>
</div><p>vi ./components/favicon/core/favicon_database.cc +256</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="n">FaviconDatabase</span><span class="o">::</span><span class="n">FaviconDatabase</span><span class="p">()</span>
    <span class="o">:</span> <span class="n">db_</span><span class="p">({</span><span class="c1">// Run the database in exclusive mode. Nobody else should be
</span><span class="c1"></span>           <span class="c1">// accessing the database while we&#39;re running, and this will give
</span><span class="c1"></span>           <span class="c1">// somewhat improved perf.
</span><span class="c1"></span>           <span class="p">.</span><span class="n">exclusive_locking</span> <span class="o">=</span> <span class="nb">true</span><span class="p">,</span>
           <span class="c1">// Favicons db only stores favicons, so we don&#39;t need that big a page
</span><span class="c1"></span>           <span class="c1">// size or cache.
</span><span class="c1"></span>           <span class="p">.</span><span class="n">wal_mode</span> <span class="o">=</span> <span class="n">base</span><span class="o">::</span><span class="n">FeatureList</span><span class="o">::</span><span class="n">IsEnabled</span><span class="p">(</span><span class="n">sql</span><span class="o">::</span><span class="n">features</span><span class="o">::</span><span class="n">kEnableWALModeByDefault</span><span class="p">),</span>	<span class="c1">//ADD THIS
</span><span class="c1"></span>           <span class="p">.</span><span class="n">page_size</span> <span class="o">=</span> <span class="mi">2048</span><span class="p">,</span>
           <span class="p">.</span><span class="n">cache_size</span> <span class="o">=</span> <span class="mi">32</span><span class="p">})</span> <span class="p">{}</span>

<span class="n">FaviconDatabase</span><span class="o">::~</span><span class="n">FaviconDatabase</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// The DBCloseScoper will delete the DB and the cache.
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">../../components/offline_pages/task/sql_store_base.cc:104:64: sorry, unimplemented: non-trivial designated initializers not supported
                                              .cache_size <span class="o">=</span> 500<span class="o">})</span>,
                                                                ^
../../components/offline_pages/task/sql_store_base.cc:104:64: sorry, unimplemented: non-trivial designated initializers not supported
</code></pre></td></tr></table></div>
</div>
</div><p>vi ./components/offline_pages/task/sql_store_base.cc +104</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="kt">void</span> <span class="n">SqlStoreBase</span><span class="o">::</span><span class="n">Initialize</span><span class="p">(</span><span class="n">base</span><span class="o">::</span><span class="n">OnceClosure</span> <span class="n">pending_command</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">OnOpenStart</span><span class="p">(</span><span class="n">last_closing_time_</span><span class="p">);</span>

  <span class="n">DCHECK_EQ</span><span class="p">(</span><span class="n">initialization_status_</span><span class="p">,</span> <span class="n">InitializationStatus</span><span class="o">::</span><span class="n">kNotInitialized</span><span class="p">);</span>
  <span class="n">initialization_status_</span> <span class="o">=</span> <span class="n">InitializationStatus</span><span class="o">::</span><span class="n">kInProgress</span><span class="p">;</span>

  <span class="c1">// This is how we reset a pointer and provide deleter. This is necessary to
</span><span class="c1"></span>  <span class="c1">// ensure that we can close the store more than once.
</span><span class="c1"></span>  <span class="n">db_</span> <span class="o">=</span> <span class="n">DatabaseUniquePtr</span><span class="p">(</span><span class="k">new</span> <span class="n">sql</span><span class="o">::</span><span class="n">Database</span><span class="p">({</span><span class="c1">// These values are default.
</span><span class="c1"></span>                                             <span class="p">.</span><span class="n">exclusive_locking</span> <span class="o">=</span> <span class="nb">true</span><span class="p">,</span>
                                             <span class="p">.</span><span class="n">wal_mode</span> <span class="o">=</span> <span class="n">base</span><span class="o">::</span><span class="n">FeatureList</span><span class="o">::</span><span class="n">IsEnabled</span><span class="p">(</span><span class="n">sql</span><span class="o">::</span><span class="n">features</span><span class="o">::</span><span class="n">kEnableWALModeByDefault</span><span class="p">),</span> <span class="c1">//ADD THIS
</span><span class="c1"></span>                                             <span class="p">.</span><span class="n">page_size</span> <span class="o">=</span> <span class="mi">4096</span><span class="p">,</span>
                                             <span class="p">.</span><span class="n">cache_size</span> <span class="o">=</span> <span class="mi">500</span><span class="p">}),</span>
                          <span class="n">base</span><span class="o">::</span><span class="n">OnTaskRunnerDeleter</span><span class="p">(</span><span class="n">background_task_runner_</span><span class="p">));</span>

  <span class="n">base</span><span class="o">::</span><span class="n">PostTaskAndReplyWithResult</span><span class="p">(</span>
      <span class="n">background_task_runner_</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">FROM_HERE</span><span class="p">,</span>
      <span class="n">base</span><span class="o">::</span><span class="n">BindOnce</span><span class="p">(</span><span class="o">&amp;</span><span class="n">InitializeSync</span><span class="p">,</span> <span class="n">db_</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">db_file_path_</span><span class="p">,</span> <span class="n">histogram_tag_</span><span class="p">,</span>
                     <span class="n">GetSchemaInitializationFunction</span><span class="p">()),</span>
      <span class="n">base</span><span class="o">::</span><span class="n">BindOnce</span><span class="p">(</span><span class="o">&amp;</span><span class="n">SqlStoreBase</span><span class="o">::</span><span class="n">InitializeDone</span><span class="p">,</span>
                     <span class="n">weak_ptr_factory_</span><span class="p">.</span><span class="n">GetWeakPtr</span><span class="p">(),</span>
                     <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">pending_command</span><span class="p">)));</span>
<span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<p>解压完了先把patch打上</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">chromium-60.0.3112.78-jpeg-nomangle.patch
chromium-60.0.3112.78-no-libpng-prefix.patch
chromium-67.0.3396.62-gn-system.patch
patch -p1 &lt;../../chromium-70.0.3538.67-sandbox-pie.patch
patch -p1 &lt;../../chromium-71.0.3578.98-py2-bootstrap.patch

patch -p1 &lt;../../chromium-71.0.3578.98-widevine-r3.patch
patch -p1 &lt;../../chromium-75.0.3770.100-epel7-stdc++.patch
patch -p1 &lt;../../chromium-76.0.3809.100-gcc-remoting-constexpr.patch
patch -p1 &lt;../../chromium-77.0.3865.75-gcc-include-memory.patch
patch -p1 &lt;../../chromium-77.0.3865.75-no-zlib-mangle.patch
patch -p1 &lt;../../chromium-77-clang.patch
patch -p1 &lt;../../chromium-78.0.3904.70-gcc9-drop-rsp-clobber.patch
patch -p1 &lt;../../chromium-78-protobuf-RepeatedPtrField-export.patch
patch -p1 &lt;../../chromium-80.0.3987.132-el7-noexcept.patch
patch -p1 &lt;../../chromium-80.0.3987.87-missing-cstdint-header.patch
patch -p1 &lt;../../chromium-81.0.4044.92-unbundle-zlib.patch
patch -p1 &lt;../../chromium-83.0.4103.61-disable-fontconfig-cache-magic.patch
patch -p1 &lt;../../chromium-84.0.4147.105-gn-gcc-cleanup.patch
patch -p1 &lt;../../chromium-84.0.4147.125-aarch64-clearkeycdm-binutils-workaround.patch
patch -p1 &lt;../../chromium-84.0.4147.125-i686-fix_textrels.patch
patch -p1 &lt;../../chromium-84.0.4147.125-remoting-cstring.patch
patch -p1 &lt;../../chromium-84.0.4147.89-epel7-old-cups.patch
patch -p1 &lt;../../chromium-85.0.4183.83-el7-old-libdrm.patch
patch -p1 &lt;../../chromium-86.0.4240.75-fedora-user-agent.patch
patch -p1 &lt;../../chromium-86.0.4240.75-fix-vaapi-on-intel.patch
patch -p1 &lt;../../chromium-86.0.4240.75-vaapi-i686-fpermissive.patch
patch -p1 &lt;../../chromium-88.0.4324.182-gcc-fix-swiftshader-libEGL-visibility.patch
patch -p1 &lt;../../chromium-88.0.4324.182-rawhide-gcc-std-max-fix.patch
patch -p1 &lt;../../chromium-89.0.4389.72-enable-hardware-accelerated-mjpeg.patch
patch -p1 &lt;../../chromium-89.0.4389.72-initial_prefs-etc-path.patch
patch -p1 &lt;../../chromium-89.0.4389.72-missing-cstring-header.patch
patch -p1 &lt;../../chromium-89.0.4389.72-norar.patch

patch -p1 &lt;../../chromium-89.0.4389.82-rhel8-force-disable-use_gnome_keyring.patch
patch -p1 &lt;../../chromium-89.0.4389.82-support-futex_time64.patch
patch -p1 &lt;../../chromium-89-EnumTable-crash.patch
patch -p1 &lt;../../chromium-90.0.4430.72-fstatfix.patch
patch -p1 &lt;../../chromium-90.0.4430.72-widevine-no-download.patch
patch -p1 &lt;../../chromium-90.0.4430.93-epel7-erase-fix.patch
patch -p1 &lt;../../chromium-90.0.4430.93-epel7-old-headers-workarounds.patch
patch -p1 &lt;../../chromium-90.0.4430.93-epel8-aarch64-libpng16-symbol-prefixes.patch
patch -p1 &lt;../../chromium-90-angle-constexpr.patch
patch -p1 &lt;../../chromium-90-CrossThreadCopier-qualification.patch
patch -p1 &lt;../../chromium-90-quantization_utils-include.patch
patch -p1 &lt;../../chromium-90-ruy-include.patch
patch -p1 &lt;../../chromium-90-TokenizedOutput-include.patch

patch -p1 &lt;../../chromium-gcc11.patch
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">../../components/qr_code_generator/qr_code_generator.cc:671:10: error: could not convert ‘code’ from ‘QRCodeGenerator::GeneratedCode’ to ‘base::Optional&lt;QRCodeGenerator::GeneratedCode&gt;’
   <span class="k">return</span> code<span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vi components/qr_code_generator/qr_code_generator.cc +671</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="c1">//  GeneratedCode code; //DELETE THIS
</span><span class="c1"></span>  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">QRCodeGenerator</span><span class="o">::</span><span class="n">GeneratedCode</span><span class="o">&gt;</span> <span class="n">code</span><span class="p">;</span>
  <span class="n">code</span><span class="p">.</span><span class="n">value</span><span class="p">().</span><span class="n">data</span> <span class="o">=</span> <span class="n">base</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">d_</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">version_info_</span><span class="o">-&gt;</span><span class="n">total_size</span><span class="p">());</span> <span class="c1">//ADD THIS value()
</span><span class="c1"></span>  <span class="n">code</span><span class="p">.</span><span class="n">value</span><span class="p">().</span><span class="n">qr_size</span> <span class="o">=</span> <span class="n">version_info_</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">;</span>									<span class="c1">//ADD THIS value()
</span><span class="c1"></span>  <span class="k">return</span> <span class="n">code</span><span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">../../net/dns/dns_query.cc:88:10: error: could not convert ‘merged_opt_rdata’ from ‘net::OptRecordRdata’ to ‘base::Optional&lt;net::OptRecordRdata&gt;’
   <span class="k">return</span> merged_opt_rdata<span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vi ./net/dns/dns_query.cc +88</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">OptRecordRdata</span><span class="o">&gt;</span> <span class="n">AddPaddingIfNecessary</span><span class="p">(</span>
    <span class="k">const</span> <span class="n">OptRecordRdata</span><span class="o">*</span> <span class="n">opt_rdata</span><span class="p">,</span>
    <span class="n">DnsQuery</span><span class="o">::</span><span class="n">PaddingStrategy</span> <span class="n">padding_strategy</span><span class="p">,</span>
    <span class="n">size_t</span> <span class="n">no_opt_buffer_size</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// If no input OPT record rdata and no padding, no OPT record rdata needed.
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">opt_rdata</span> <span class="o">&amp;&amp;</span> <span class="n">padding_strategy</span> <span class="o">==</span> <span class="n">DnsQuery</span><span class="o">::</span><span class="n">PaddingStrategy</span><span class="o">::</span><span class="n">NONE</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">base</span><span class="o">::</span><span class="n">nullopt</span><span class="p">;</span>

  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">OptRecordRdata</span><span class="o">&gt;</span> <span class="n">merged_opt_rdata</span><span class="p">;</span> <span class="c1">//ADD THIS: base::Optional&lt;OptRecordRdata&gt;
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="n">opt_rdata</span><span class="p">)</span>
    <span class="n">merged_opt_rdata</span><span class="p">.</span><span class="n">value</span><span class="p">().</span><span class="n">AddOpts</span><span class="p">(</span><span class="o">*</span><span class="n">opt_rdata</span><span class="p">);</span> <span class="c1">//ADD value()
</span><span class="c1"></span>
  <span class="n">size_t</span> <span class="n">unpadded_size</span> <span class="o">=</span> <span class="n">no_opt_buffer_size</span> <span class="o">+</span> <span class="n">OptRecordSize</span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="n">merged_opt_rdata</span><span class="p">.</span><span class="n">value</span><span class="p">()));</span> <span class="c1">//ADD value()
</span><span class="c1"></span>  <span class="n">size_t</span> <span class="n">padding_size</span> <span class="o">=</span> <span class="n">DeterminePaddingSize</span><span class="p">(</span><span class="n">unpadded_size</span><span class="p">,</span> <span class="n">padding_strategy</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">padding_size</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// |opt_rdata| must not already contain padding if DnsQuery is to add
</span><span class="c1"></span>    <span class="c1">// padding.
</span><span class="c1"></span>    <span class="n">DCHECK</span><span class="p">(</span><span class="o">!</span><span class="n">merged_opt_rdata</span><span class="p">.</span><span class="n">value</span><span class="p">().</span><span class="n">ContainsOptCode</span><span class="p">(</span><span class="n">dns_protocol</span><span class="o">::</span><span class="n">kEdnsPadding</span><span class="p">));</span> <span class="c1">//ADD value()
</span><span class="c1"></span>    <span class="c1">// OPT header is the minimum amount of padding.
</span><span class="c1"></span>    <span class="n">DCHECK</span><span class="p">(</span><span class="n">padding_size</span> <span class="o">&gt;=</span> <span class="n">OptRecordRdata</span><span class="o">::</span><span class="n">Opt</span><span class="o">::</span><span class="n">kHeaderSize</span><span class="p">);</span>

    <span class="n">merged_opt_rdata</span><span class="p">.</span><span class="n">value</span><span class="p">().</span><span class="n">AddOpt</span><span class="p">(</span><span class="n">OptRecordRdata</span><span class="o">::</span><span class="n">Opt</span><span class="p">(</span> <span class="c1">//ADD value()
</span><span class="c1"></span>        <span class="n">dns_protocol</span><span class="o">::</span><span class="n">kEdnsPadding</span><span class="p">,</span>
        <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">padding_size</span> <span class="o">-</span> <span class="n">OptRecordRdata</span><span class="o">::</span><span class="n">Opt</span><span class="o">::</span><span class="n">kHeaderSize</span><span class="p">,</span> <span class="mi">0</span><span class="p">)));</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="n">merged_opt_rdata</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">./buildtools/third_party/libc++/trunk/include/memory:824:9: error: use of deleted <span class="k">function</span> ‘base::Value::Value<span class="o">(</span>const base::Value<span class="p">&amp;</span><span class="o">)</span>’
         ::new <span class="o">((</span>void*<span class="o">)</span>__p<span class="o">)</span> _Up<span class="o">(</span>_VSTD::forward&lt;_Args&gt;<span class="o">(</span>__args<span class="o">)</span>...<span class="o">)</span><span class="p">;</span>
         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from ../../base/trace_event/trace_config_category_filter.h:13:0,
                 from ../../base/trace_event/trace_config.h:20,
                 from ../../base/trace_event/trace_log.h:27,
                 from ../../base/trace_event/trace_event.h:29,
                 from ../../skia/ext/event_tracer_impl.cc:7:
../../base/values.h:169:3: note: declared here
   Value<span class="o">(</span>const Value<span class="p">&amp;</span><span class="o">)</span> <span class="o">=</span> delete<span class="p">;</span>
   ^~~~~
</code></pre></td></tr></table></div>
</div>
</div><p>因为用了delete的函数，所以报错了。</p>
<p>vi base/values.h +169</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++">  <span class="n">Value</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Value</span><span class="o">&amp;&amp;</span> <span class="n">that</span><span class="p">)</span> <span class="k">noexcept</span><span class="p">;</span>
<span class="c1">//  Value(const Value&amp;) = delete;  去掉delete就好了
</span><span class="c1"></span>  <span class="n">Value</span><span class="p">(</span><span class="k">const</span> <span class="n">Value</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>		
  <span class="n">Value</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">Value</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">../../buildtools/third_party/libc++/trunk/include/memory:824:9: error: use of deleted <span class="k">function</span> ‘std::__Cr::pair&lt;_T1, _T2&gt;::pair<span class="o">(</span>const std::__Cr::pair&lt;_T1, _T2&gt;<span class="p">&amp;</span><span class="o">)</span> <span class="o">[</span>with <span class="nv">_T1</span> <span class="o">=</span> std::__Cr::basic_string&lt;char, std::__Cr::char_traits&lt;char&gt;, std::__Cr::allocator&lt;char&gt; &gt;<span class="p">;</span> <span class="nv">_T2</span> <span class="o">=</span> std::__Cr::unique_ptr&lt;base::Value&gt;<span class="o">]</span>’
         ::new <span class="o">((</span>void*<span class="o">)</span>__p<span class="o">)</span> _Up<span class="o">(</span>_VSTD::forward&lt;_Args&gt;<span class="o">(</span>__args<span class="o">)</span>...<span class="o">)</span><span class="p">;</span>
         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from ../../buildtools/third_party/libc++/trunk/include/memory:674:0,
                 from ../../base/trace_event/trace_event.h:15,
                 from ../../skia/ext/event_tracer_impl.cc:7:
../../buildtools/third_party/libc++/trunk/include/utility:309:5: note: ‘std::__Cr::pair&lt;_T1, _T2&gt;::pair<span class="o">(</span>const std::__Cr::pair&lt;_T1, _T2&gt;<span class="p">&amp;</span><span class="o">)</span> <span class="o">[</span>with <span class="nv">_T1</span> <span class="o">=</span> std::__Cr::basic_string&lt;char, std::__Cr::char_traits&lt;char&gt;, std::__Cr::allocator&lt;char&gt; &gt;<span class="p">;</span> <span class="nv">_T2</span> <span class="o">=</span> std::__Cr::unique_ptr&lt;base::Value&gt;<span class="o">]</span>’ is implicitly deleted because the default definition would be ill-formed:
     pair<span class="o">(</span>pair const<span class="p">&amp;</span><span class="o">)</span> <span class="o">=</span> default<span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vi buildtools/third_party/libc++/trunk/include/utility +309</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#if !defined(_LIBCPP_CXX03_LANG)
</span><span class="cp"></span>    <span class="n">pair</span><span class="p">(</span><span class="n">pair</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>	
    <span class="c1">//pair(pair&amp;&amp;) = default;	//注释掉 移动构造
</span><span class="c1"></span><span class="cp">#else
</span><span class="cp"></span>  <span class="c1">// Use the implicitly declared copy constructor in C++03
</span><span class="c1"></span><span class="cp">#endif
</span></code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">../../ui/gfx/x/x11_window_event_manager.cc:24:75: sorry, unimplemented: non-trivial designated initializers not supported
           .window <span class="o">=</span> window, .event_mask <span class="o">=</span> static_cast&lt;EventMask&gt;<span class="o">(</span>new_mask<span class="o">)})</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vi ./ui/gfx/x/generated_protos/xproto.h +1477</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="k">struct</span> <span class="nc">ChangeWindowAttributesRequest</span> <span class="p">{</span>
  <span class="n">Window</span> <span class="n">window</span><span class="p">{};</span>
  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">EventMask</span><span class="o">&gt;</span> <span class="n">event_mask</span><span class="p">{};</span> <span class="c1">//与16行的换了下顺序
</span><span class="c1"></span>  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Pixmap</span><span class="o">&gt;</span> <span class="n">background_pixmap</span><span class="p">{};</span>
  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span> <span class="n">background_pixel</span><span class="p">{};</span>
  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Pixmap</span><span class="o">&gt;</span> <span class="n">border_pixmap</span><span class="p">{};</span>
  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span> <span class="n">border_pixel</span><span class="p">{};</span>
  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Gravity</span><span class="o">&gt;</span> <span class="n">bit_gravity</span><span class="p">{};</span>
  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Gravity</span><span class="o">&gt;</span> <span class="n">win_gravity</span><span class="p">{};</span>
  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">BackingStore</span><span class="o">&gt;</span> <span class="n">backing_store</span><span class="p">{};</span>
  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span> <span class="n">backing_planes</span><span class="p">{};</span>
  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span> <span class="n">backing_pixel</span><span class="p">{};</span>
  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Bool32</span><span class="o">&gt;</span> <span class="n">override_redirect</span><span class="p">{};</span>    
  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Bool32</span><span class="o">&gt;</span> <span class="n">save_under</span><span class="p">{};</span>
<span class="c1">//  base::Optional&lt;EventMask&gt; event_mask{};
</span><span class="c1"></span>  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">EventMask</span><span class="o">&gt;</span> <span class="n">do_not_propogate_mask</span><span class="p">{};</span>
  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">ColorMap</span><span class="o">&gt;</span> <span class="n">colormap</span><span class="p">{};</span>
  <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Cursor</span><span class="o">&gt;</span> <span class="n">cursor</span><span class="p">{};</span>
<span class="p">};</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">../../media/renderers/paint_canvas_video_renderer.h:261:58:   required from here
../../third_party/skia/include/core/SkRefCnt.h:141:14: error: invalid use of incomplete <span class="nb">type</span> ‘class media::VideoTextureBacking’
         obj-&gt;ref<span class="o">()</span><span class="p">;</span>
         ~~~~~^~~
In file included from ../../media/renderers/video_resource_updater.cc:44:0:
../../media/renderers/paint_canvas_video_renderer.h:44:7: note: forward declaration of ‘class media::VideoTextureBacking’
 class VideoTextureBacking<span class="p">;</span>
 -------------------------------------------------------------------------------------------------------------
 ../../media/renderers/paint_canvas_video_renderer.h:261:25:   required from here
../../third_party/skia/include/core/SkRefCnt.h:141:14: error: invalid use of incomplete <span class="nb">type</span> ‘class media::VideoTextureBacking’
         obj-&gt;ref<span class="o">()</span><span class="p">;</span>
         ~~~~~^~~
In file included from ../../media/renderers/video_resource_updater.cc:44:0:
../../media/renderers/paint_canvas_video_renderer.h:44:7: note: forward declaration of ‘class media::VideoTextureBacking’
 class VideoTextureBacking<span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vi third_party/skia/include/core/SkRefCnt.h +142</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span> <span class="k">static</span> <span class="kr">inline</span> <span class="n">T</span><span class="o">*</span> <span class="n">SkSafeRef</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="p">{</span>
 <span class="c1">//       obj-&gt;ref();			//注释掉了，不知道后面会不会有影响 CHANGE THIS
</span><span class="c1"></span>    <span class="p">}</span>
    <span class="k">return</span> <span class="n">obj</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/** Check if the argument is non-null, and if so, call obj-&gt;unref()
</span><span class="cm"> */</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span> <span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="n">SkSafeUnref</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//     obj-&gt;unref(); //注释掉了，不知道后面会不会有影响 CHANGE THIS
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">../../buildtools/third_party/libc++/trunk/include/memory:824:9: error: use of deleted <span class="k">function</span> ‘std::__Cr::pair&lt;_T1, _T2&gt;::pair<span class="o">(</span>const std::__Cr::pair&lt;_T1, _T2&gt;<span class="p">&amp;</span><span class="o">)</span> <span class="o">[</span>with <span class="nv">_T1</span> <span class="o">=</span> std::__Cr::basic_string&lt;char, std::__Cr::char_traits&lt;char&gt;, std::__Cr::allocator&lt;char&gt; &gt;<span class="p">;</span> <span class="nv">_T2</span> <span class="o">=</span> std::__Cr::unique_ptr&lt;base::Value&gt;<span class="o">]</span>’
         ::new <span class="o">((</span>void*<span class="o">)</span>__p<span class="o">)</span> _Up<span class="o">(</span>_VSTD::forward&lt;_Args&gt;<span class="o">(</span>__args<span class="o">)</span>...<span class="o">)</span><span class="p">;</span>
         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</code></pre></td></tr></table></div>
</div>
</div><p>vi buildtools/third_party/libc++/trunk/include/utility +309</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"> <span class="cp">#if !defined(_LIBCPP_CXX03_LANG)
</span><span class="cp"></span>  <span class="c1">//pair(pair const&amp;) = default;	//把这俩行都注释掉 改成下面这样
</span><span class="c1"></span>  <span class="n">pair</span><span class="p">(</span><span class="n">pair</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">);</span>				<span class="c1">//ADD THIS
</span><span class="c1"></span>  <span class="c1">//pair(pair&amp;&amp;) = default;
</span><span class="c1"></span><span class="cp">#else
</span><span class="cp"></span>  <span class="c1">// Use the implicitly declared copy constructor in C++03
</span><span class="c1"></span><span class="cp">#endif
</span></code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">./ui/gfx/x/xproto_util.h:94:36: sorry, unimplemented: non-trivial designated initializers not supported
   <span class="k">return</span> connection-&gt;ChangeProperty<span class="o">(</span>
          ~~~~~~~~~~~~~~~~~~~~~~~~~~^
       ChangePropertyRequest<span class="o">{</span>.window <span class="o">=</span> static_cast&lt;Window&gt;<span class="o">(</span>window<span class="o">)</span>,
       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                             .property <span class="o">=</span> name,
                             ~~~~~~~~~~~~~~~~~
                             .type <span class="o">=</span> type,
                             ~~~~~~~~~~~~~
                             .format <span class="o">=</span> CHAR_BIT * sizeof<span class="o">(</span>T<span class="o">)</span>,
                             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                             .data_len <span class="o">=</span> values.size<span class="o">()</span>,
                             ~~~~~~~~~~~~~~~~~~~~~~~~~~
                             .data <span class="o">=</span> base::RefCountedBytes::TakeVector<span class="o">(</span><span class="p">&amp;</span>data<span class="o">)})</span><span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vi ./ui/gfx/x/generated_protos/xproto.h +1647</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="c1">//修改的结构体
</span><span class="c1"></span><span class="p">.</span><span class="n">src_window</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">X11</span><span class="o">::</span><span class="n">Window</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
 <span class="p">.</span><span class="n">c_class</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">WindowClass</span><span class="o">::</span><span class="n">InputOutput</span><span class="p">,</span>
<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">x11</span><span class="o">::</span><span class="n">Atom</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x11</span><span class="o">::</span><span class="n">Atom</span><span class="o">::</span><span class="n">None</span><span class="p">),</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="n">x11</span><span class="o">::</span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">x11</span><span class="o">::</span><span class="n">XProto</span><span class="o">::</span><span class="n">CreateWindow</span><span class="p">(</span>
<span class="k">const</span> <span class="kt">uint8_t</span><span class="o">&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">x11</span><span class="o">::</span><span class="n">Window</span><span class="o">&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">x11</span><span class="o">::</span><span class="n">Window</span><span class="o">&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="kt">int16_t</span><span class="o">&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="kt">int16_t</span><span class="o">&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="kt">uint16_t</span><span class="o">&amp;</span><span class="p">,</span>
<span class="k">const</span> <span class="kt">uint16_t</span><span class="o">&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="kt">uint16_t</span><span class="o">&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">x11</span><span class="o">::</span><span class="n">WindowClass</span><span class="o">&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">x11</span><span class="o">::</span><span class="n">VisualId</span><span class="o">&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">x11</span><span class="o">::</span><span class="n">Pixmap</span><span class="o">&gt;&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">x11</span><span class="o">::</span><span class="n">Pixmap</span><span class="o">&gt;&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">x11</span><span class="o">::</span><span class="n">Gravity</span><span class="o">&gt;&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">x11</span><span class="o">::</span><span class="n">Gravity</span><span class="o">&gt;&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">x11</span><span class="o">::</span><span class="n">BackingStore</span><span class="o">&gt;&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">x11</span><span class="o">::</span><span class="n">Bool32</span><span class="o">&gt;&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">x11</span><span class="o">::</span><span class="n">Bool32</span><span class="o">&gt;&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">x11</span><span class="o">::</span><span class="n">EventMask</span><span class="o">&gt;&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">x11</span><span class="o">::</span><span class="n">EventMask</span><span class="o">&gt;&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">x11</span><span class="o">::</span><span class="n">ColorMap</span><span class="o">&gt;&amp;</span><span class="p">,</span> 
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">x11</span><span class="o">::</span><span class="n">Cursor</span><span class="o">&gt;&amp;</span><span class="p">)</span>


    	<span class="p">.</span><span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">.</span><span class="n">wid</span> <span class="o">=</span> <span class="n">window</span><span class="p">,</span>
        <span class="p">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">connection</span><span class="o">-&gt;</span><span class="n">default_root</span><span class="p">(),</span>
        <span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100</span><span class="p">,</span>
        <span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100</span><span class="p">,</span>
        <span class="p">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="p">.</span><span class="n">border_width</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">.</span><span class="n">c_class</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">WindowClass</span><span class="o">::</span><span class="n">InputOnly</span><span class="p">,</span>
        <span class="p">.</span><span class="n">visual</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">x11</span><span class="o">::</span><span class="n">VisualId</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
        <span class="p">.</span><span class="n">background_pixmap</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">Pixmap</span><span class="o">::</span><span class="n">None</span><span class="p">,</span>
        <span class="p">.</span><span class="n">background_pixel</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">.</span><span class="n">border_pixmap</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">Pixmap</span><span class="o">::</span><span class="n">None</span><span class="p">,</span>
        <span class="p">.</span><span class="n">border_pixel</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">.</span><span class="n">bit_gravity</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">Gravity</span><span class="o">::</span><span class="n">BitForget</span><span class="p">,</span>
        <span class="p">.</span><span class="n">win_gravity</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">Gravity</span><span class="o">::</span><span class="n">BitForget</span><span class="p">,</span>
        <span class="p">.</span><span class="n">backing_store</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">BackingStore</span><span class="o">::</span><span class="n">NotUseful</span><span class="p">,</span>
        <span class="p">.</span><span class="n">backing_planes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">.</span><span class="n">backing_pixel</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">.</span><span class="n">override_redirect</span> <span class="o">=</span> <span class="n">Bool32</span><span class="p">(</span><span class="nb">true</span><span class="p">),</span>

	   <span class="p">.</span><span class="n">background_pixmap</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">Pixmap</span><span class="o">::</span><span class="n">None</span><span class="p">,</span>
        <span class="p">.</span><span class="n">background_pixel</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">.</span><span class="n">border_pixmap</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">Pixmap</span><span class="o">::</span><span class="n">None</span><span class="p">,</span>
        <span class="p">.</span><span class="n">border_pixel</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">.</span><span class="n">bit_gravity</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">Gravity</span><span class="o">::</span><span class="n">BitForget</span><span class="p">,</span>
        <span class="p">.</span><span class="n">win_gravity</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">Gravity</span><span class="o">::</span><span class="n">BitForget</span><span class="p">,</span>
        <span class="p">.</span><span class="n">backing_store</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">BackingStore</span><span class="o">::</span><span class="n">NotUseful</span><span class="p">,</span>
        <span class="p">.</span><span class="n">backing_planes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">.</span><span class="n">backing_pixel</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">.</span><span class="n">override_redirect</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">Bool32</span><span class="p">(</span><span class="nb">false</span><span class="p">),</span>
        <span class="p">.</span><span class="n">save_under</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">Bool32</span><span class="p">(</span><span class="nb">false</span><span class="p">),</span>
        <span class="p">.</span><span class="n">event_mask</span> <span class="o">=</span> <span class="n">x11</span><span class="o">::</span><span class="n">EventMask</span><span class="o">::</span><span class="n">Exposure</span><span class="p">});</span>


<span class="n">newUserStr</span><span class="o">=</span><span class="n">qianduoduo</span><span class="p">;</span>
<span class="mi">8</span><span class="n">d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92</span>
    
    <span class="k">reinterpret_cast</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<p>09-22</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="n">MakeFixedFlatSet</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">StringPiece</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">brace</span><span class="o">-</span><span class="n">enclosed</span> <span class="n">initializer</span> <span class="n">list</span><span class="o">&gt;</span><span class="p">)</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">Key</span><span class="p">,</span> <span class="kt">long</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">N</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Compare</span><span class="o">&gt;</span> <span class="k">constexpr</span> <span class="n">base</span><span class="o">::</span><span class="n">fixed_flat_set</span><span class="o">&lt;</span><span class="n">Key</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">Compare</span><span class="o">&gt;</span> <span class="n">base</span><span class="o">::</span><span class="n">MakeFixedFlatSet</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="n">Key</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&amp;&amp;</span><span class="p">)[</span><span class="n">N</span><span class="p">],</span> <span class="k">const</span> <span class="n">Compare</span><span class="o">&amp;</span><span class="p">)</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vim services/network/public/cpp/cross_origin_read_blocking.cc +314</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="mi">251</span> <span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="n">GetNeverSniffedMimeTypes</span><span class="p">()</span> <span class="p">{</span>
 <span class="mi">252</span>   <span class="k">static</span> <span class="k">constexpr</span> <span class="k">auto</span> <span class="n">kNeverSniffedMimeTypes</span> <span class="o">=</span> <span class="n">base</span><span class="o">::</span><span class="n">MakeFixedFlatSet</span><span class="o">&lt;</span>
 <span class="mi">253</span>       <span class="n">base</span><span class="o">::</span><span class="n">StringPiece</span><span class="p">,</span> <span class="mi">34</span><span class="o">&gt;</span><span class="p">({</span>		<span class="c1">//添加， 34
</span></code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">obj/mojo/core/impl_for_embedder/channel_linux.o:channel_linux.cc:function mojo::core::ChannelLinux::UpgradesEnabled<span class="o">()</span>: error: undefined reference to <span class="s1">&#39;mojo::core::kMojoLinuxChannelSharedMem&#39;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vi mojo/core/embedder/features.cc</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#if defined(OS_POSIX) &amp;&amp; !defined(OS_NACL) &amp;&amp; !defined(OS_MAC)
</span><span class="cp"></span><span class="c1">// zb #if defined(OS_LINUX) || defined(OS_CHROMEOS) || defined(OS_ANDROID)	
</span><span class="c1"></span><span class="n">COMPONENT_EXPORT</span><span class="p">(</span><span class="n">MOJO_CORE_EMBEDDER_FEATURES</span><span class="p">)</span>
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Feature</span> <span class="n">kMojoLinuxChannelSharedMem</span><span class="p">{</span>
    <span class="s">&#34;MojoLinuxChannelSharedMem&#34;</span><span class="p">,</span> <span class="n">base</span><span class="o">::</span><span class="n">FEATURE_DISABLED_BY_DEFAULT</span><span class="p">};</span>
<span class="n">COMPONENT_EXPORT</span><span class="p">(</span><span class="n">MOJO_CORE_EMBEDDER_FEATURES</span><span class="p">)</span>
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">FeatureParam</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">kMojoLinuxChannelSharedMemPages</span><span class="p">{</span>
    <span class="o">&amp;</span><span class="n">kMojoLinuxChannelSharedMem</span><span class="p">,</span> <span class="s">&#34;MojoLinuxChannelSharedMemPages&#34;</span><span class="p">,</span> <span class="mi">4</span><span class="p">};</span>
<span class="c1">// zb #endif  // defined(OS_LINUX) || defined(OS_CHROMEOS) || defined(OS_ANDROID)
</span><span class="c1"></span>
<span class="n">COMPONENT_EXPORT</span><span class="p">(</span><span class="n">MOJO_CORE_EMBEDDER_FEATURES</span><span class="p">)</span>
<span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Feature</span> <span class="n">kMojoPosixUseWritev</span><span class="p">{</span><span class="s">&#34;MojoPosixUseWritev&#34;</span><span class="p">,</span>
                                        <span class="n">base</span><span class="o">::</span><span class="n">FEATURE_DISABLED_BY_DEFAULT</span><span class="p">};</span>
<span class="cp">#endif  </span><span class="c1">// defined(OS_POSIX) &amp;&amp; !defined(OS_NACL) &amp;&amp; !defined(OS_MAC)
</span></code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">obj/mojo/core/impl_for_embedder/channel_linux.o:channel_linux.cc:function mojo::core::ChannelLinux::UpgradesEnabled<span class="o">()</span>: error: undefined reference to <span class="s1">&#39;mojo::core::kMojoLinuxChannelSharedMem&#39;</span>
collect2: error: ld returned <span class="m">1</span> <span class="nb">exit</span> status
</code></pre></td></tr></table></div>
</div>
</div><p>vim mojo/core/channel_linux.cc</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="k">extern</span> <span class="k">const</span> <span class="n">base</span><span class="o">::</span><span class="n">Feature</span> <span class="n">kMojoLinuxChannelSharedMem</span><span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">obj/skia/skia/SkSLSPIRVCodeGenerator.o:SkSLSPIRVCodeGenerator.cpp:function SkSL::SPIRVCodeGenerator::writeInstructions<span class="o">(</span>SkSL::Program const<span class="p">&amp;</span>, SkSL::OutputStream<span class="p">&amp;</span><span class="o">)</span>: error: undefined reference to <span class="s1">&#39;std::__Cr::pair&lt;SkSL::Variable const* const, unsigned int&gt;::pair(std::__Cr::pair&lt;SkSL::Variable const* const, unsigned int&gt; const&amp;)&#39;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>头文件里加这个</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">gen/components/ui_devtools/base_string_adapter.cc: In static member <span class="k">function</span> ‘static void ui_devtools::protocol::StringUtil::WriteString<span class="o">(</span>const String<span class="p">&amp;</span>, std::__Cr::vector&lt;unsigned char&gt;*<span class="o">)</span>’:
gen/components/ui_devtools/base_string_adapter.cc:164:23: error: reference to ‘span’ is ambiguous
   cbor::EncodeString8<span class="o">(</span>span&lt;uint8_t&gt;<span class="o">(</span>StringUtil::CharactersUTF8<span class="o">(</span>str<span class="o">)</span>,
                       ^~~~
In file included from ../../buildtools/third_party/libc++/trunk/include/memory:676:0,
                 from gen/components/ui_devtools/base_string_adapter.h:10,
                 from gen/components/ui_devtools/base_string_adapter.cc:7:
../../buildtools/third_party/libc++/trunk/include/iterator:1577:68: note: candidates are: template&lt;class _Tp, long unsigned int &lt;anonymous&gt; &gt; class std::__Cr::span
     template &lt;class _Tp, size_t&gt; friend class _LIBCPP_TEMPLATE_VIS span<span class="p">;</span>
                                                                    ^~~~
In file included from ../../third_party/inspector_protocol/crdtp/parser_handler.h:9:0,
                 from ../../third_party/inspector_protocol/crdtp/cbor.h:15,
                 from ../../third_party/inspector_protocol/crdtp/protocol_core.h:14,
                 from gen/components/ui_devtools/base_string_adapter.h:18,
                 from gen/components/ui_devtools/base_string_adapter.cc:7:
../../third_party/inspector_protocol/crdtp/span.h:21:7: note:                 template&lt;class T&gt; class crdtp::span
 class span <span class="o">{</span>
       ^~~~
gen/components/ui_devtools/base_string_adapter.cc:164:35: error: expected primary-expression before ‘&gt;’ token
   cbor::EncodeString8<span class="o">(</span>span&lt;uint8_t&gt;<span class="o">(</span>StringUtil::CharactersUTF8<span class="o">(</span>str<span class="o">)</span>,
</code></pre></td></tr></table></div>
</div>
</div><p>vi out/Default/gen/components/ui_devtools/base_string_adapter.cc +164</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="kt">void</span> <span class="n">StringUtil</span><span class="o">::</span><span class="n">WriteString</span><span class="p">(</span><span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;*</span> <span class="n">bytes</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">cbor</span><span class="o">::</span><span class="n">EncodeString8</span><span class="p">(</span><span class="n">crdtp</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">StringUtil</span><span class="o">::</span><span class="n">CharactersUTF8</span><span class="p">(</span><span class="n">str</span><span class="p">),</span>	<span class="c1">//添加crdtp::
</span><span class="c1"></span>                                    <span class="n">StringUtil</span><span class="o">::</span><span class="n">CharacterCount</span><span class="p">(</span><span class="n">str</span><span class="p">)),</span>
                      <span class="n">bytes</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<p>28029</p>
<p>26364</p>
<hr>
<p>09-23</p>
<p>:ui::ImeTextSpan</p>
<p>vim out/Default/gen/ui/base/ime/mojom/text_input_state.mojom.h +403</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="mi">401</span> <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="n">ImeTextSpanInfo</span><span class="o">::</span><span class="n">EnableIfSame</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*&gt;</span>
<span class="mi">402</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">lhs</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">rhs</span><span class="p">)</span> <span class="p">{</span>
<span class="mi">403</span>   <span class="nf">if</span> <span class="p">(</span><span class="n">lhs</span><span class="p">.(</span><span class="o">::</span><span class="n">ui</span><span class="o">::</span><span class="n">ImeTextSpan</span><span class="o">::</span><span class="n">span</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">rhs</span><span class="p">.(</span><span class="o">::</span><span class="n">ui</span><span class="o">::</span><span class="n">ImeTextSpan</span><span class="o">::</span><span class="n">span</span><span class="p">))</span> <span class="c1">//添加命名空间, 不行的
</span><span class="c1"></span><span class="mi">404</span>     <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="mi">405</span>   <span class="nf">if</span> <span class="p">(</span><span class="n">rhs</span><span class="p">.</span><span class="n">span</span> <span class="o">&lt;</span> <span class="n">lhs</span><span class="p">.</span><span class="n">span</span><span class="p">)</span>
<span class="mi">406</span>     <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="mi">407</span>   <span class="nf">if</span> <span class="p">(</span><span class="n">lhs</span><span class="p">.</span><span class="n">bounds</span> <span class="o">&lt;</span> <span class="n">rhs</span><span class="p">.</span><span class="n">bounds</span><span class="p">)</span>
<span class="mi">408</span>     <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="mi">409</span>   <span class="nf">if</span> <span class="p">(</span><span class="n">rhs</span><span class="p">.</span><span class="n">bounds</span> <span class="o">&lt;</span> <span class="n">lhs</span><span class="p">.</span><span class="n">bounds</span><span class="p">)</span>
<span class="mi">410</span>     <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="mi">411</span>   <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="mi">412</span> <span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">../../device/fido/cable/cable_discovery_data.cc:121:10: error: could not convert ‘pairing’ from ‘std::__Cr::unique_ptr&lt;device::cablev2::Pairing&gt;’ to ‘base::Optional&lt;std::__Cr::unique_ptr&lt;device::cablev2::Pairing&gt; &gt;’
   <span class="k">return</span> pairing<span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vim device/fido/cable/cable_discovery_data.cc +121</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span></code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">../../device/fido/device_response_converter.cc:117:10: error: could not convert ‘response’ from ‘device::AuthenticatorMakeCredentialResponse’ to ‘base::Optional&lt;device::AuthenticatorMakeCredentialResponse&gt;’
   <span class="k">return</span> response<span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>这问题终于解决啦啊啊啊啊</p>
<p>vim device/fido/authenticator_make_credential_response.cc +61</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="n">AuthenticatorMakeCredentialResponse</span>  <span class="nf">response</span><span class="p">(</span>
       <span class="n">transport_used</span><span class="p">,</span> <span class="n">AttestationObject</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">authenticator_data</span><span class="p">),</span>
                                         <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">fido_attestation_statement</span><span class="p">)));</span>
   <span class="n">response</span><span class="p">.</span><span class="n">is_resident_key</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
   <span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">AuthenticatorMakeCredentialResponse</span><span class="o">&gt;</span> <span class="n">tmp_response</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">response</span><span class="p">));</span><span class="c1">//zb 添加此行 std::move()把左值变成右值
</span><span class="c1"></span>   <span class="k">return</span> <span class="n">tmp_response</span><span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">../../device/fido/device_response_converter.cc:117:10: error: could not convert ‘response’ from ‘device::AuthenticatorMakeCredentialResponse’ to ‘base::Optional&lt;device::AuthenticatorMakeCredentialResponse&gt;’
   <span class="k">return</span> response<span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><p>vim device/fido/device_response_converter.cc +117</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="n">base</span><span class="o">::</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">AuthenticatorMakeCredentialResponse</span><span class="o">&gt;</span> <span class="n">tmp_response</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">response</span><span class="p">));</span><span class="c1">//zb
</span><span class="c1"></span>   <span class="c1">//return response;
</span><span class="c1"></span>   <span class="k">return</span> <span class="n">tmp_response</span><span class="p">;</span>
</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">error :span need <span class="m">2</span> args
</code></pre></td></tr></table></div>
</div>
</div><p>vim ui/base/ime/mojom/text_input_state.mojom +15</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"> <span class="k">struct</span> <span class="nc">ImeTextSpanInfo</span> <span class="p">{</span>
    <span class="n">ui</span><span class="p">.</span><span class="n">mojom</span><span class="p">.</span><span class="n">ImeTextSpan</span> <span class="n">TMPspan</span><span class="p">;</span> <span class="c1">//这个变量更换了名字
</span><span class="c1"></span>    <span class="n">gfx</span><span class="p">.</span><span class="n">mojom</span><span class="p">.</span><span class="n">Rect</span> <span class="n">bounds</span><span class="p">;</span>
 <span class="p">};</span>

</code></pre></td></tr></table></div>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="nl">error</span><span class="p">:</span> <span class="n">undefined</span> <span class="n">reference</span> <span class="n">to</span> <span class="err">&#39;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">ModuleCache</span><span class="o">::</span><span class="n">Module</span> <span class="k">const</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">default_delete</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">ModuleCache</span><span class="o">::</span><span class="n">Module</span> <span class="k">const</span><span class="o">&gt;</span> <span class="o">&gt;*</span><span class="p">,</span> <span class="kt">long</span><span class="o">&gt;::</span><span class="n">pair</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">ModuleCache</span><span class="o">::</span><span class="n">Module</span> <span class="k">const</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">default_delete</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">ModuleCache</span><span class="o">::</span><span class="n">Module</span> <span class="k">const</span><span class="o">&gt;</span> <span class="o">&gt;*</span><span class="p">,</span> <span class="kt">long</span><span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span><span class="err">&#39;</span>

<span class="n">obj</span><span class="o">/</span><span class="n">base</span><span class="o">/</span><span class="n">base</span><span class="o">/</span><span class="n">process_memory_dump</span><span class="p">.</span><span class="nl">o</span><span class="p">:</span><span class="n">process_memory_dump</span><span class="p">.</span><span class="nl">cc</span><span class="p">:</span><span class="n">function</span> <span class="n">base</span><span class="o">::</span><span class="n">trace_event</span><span class="o">::</span><span class="n">ProcessMemoryDump</span><span class="o">::</span><span class="n">TakeAllDumpsFrom</span><span class="p">(</span><span class="n">base</span><span class="o">::</span><span class="n">trace_event</span><span class="o">::</span><span class="n">ProcessMemoryDump</span><span class="o">*</span><span class="p">)</span><span class="o">:</span> <span class="nl">error</span><span class="p">:</span> <span class="n">undefined</span> <span class="n">reference</span> <span class="n">to</span> <span class="err">&#39;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">trace_event</span><span class="o">::</span><span class="n">MemoryAllocatorDumpGuid</span> <span class="k">const</span><span class="p">,</span> <span class="n">base</span><span class="o">::</span><span class="n">trace_event</span><span class="o">::</span><span class="n">ProcessMemoryDump</span><span class="o">::</span><span class="n">MemoryAllocatorDumpEdge</span><span class="o">&gt;::</span><span class="n">pair</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">trace_event</span><span class="o">::</span><span class="n">MemoryAllocatorDumpGuid</span> <span class="k">const</span><span class="p">,</span> <span class="n">base</span><span class="o">::</span><span class="n">trace_event</span><span class="o">::</span><span class="n">ProcessMemoryDump</span><span class="o">::</span><span class="n">MemoryAllocatorDumpEdge</span><span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span><span class="err">&#39;</span>

<span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">char_traits</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">,</span> 
<span class="n">base</span><span class="o">::</span><span class="n">Value</span> <span class="k">const</span><span class="o">&amp;&gt;::</span><span class="n">pair</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">char_traits</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">,</span> 
<span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">,</span> <span class="n">base</span><span class="o">::</span><span class="n">Value</span> <span class="k">const</span><span class="o">&amp;&gt;</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span>


    
<span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">trace_event</span><span class="o">::</span><span class="n">MemoryAllocatorDumpGuid</span> <span class="k">const</span><span class="p">,</span> <span class="n">base</span><span class="o">::</span><span class="n">trace_event</span><span class="o">::</span><span class="n">ProcessMemoryDump</span><span class="o">::</span><span class="n">MemoryAllocatorDumpEdge</span><span class="o">&gt;::</span><span class="n">pair</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">trace_event</span><span class="o">::</span><span class="n">MemoryAllocatorDumpGuid</span> <span class="k">const</span><span class="p">,</span> <span class="n">base</span><span class="o">::</span><span class="n">trace_event</span><span class="o">::</span><span class="n">ProcessMemoryDump</span><span class="o">::</span><span class="n">MemoryAllocatorDumpEdge</span><span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span>
    
<span class="n">obj</span><span class="o">/</span><span class="n">base</span><span class="o">/</span><span class="n">base</span><span class="o">/</span><span class="n">field_trial_param_associator</span><span class="p">.</span><span class="nl">o</span><span class="p">:</span><span class="n">field_trial_param_associator</span><span class="p">.</span><span class="nl">cc</span><span class="p">:</span><span class="n">function</span> 
<span class="n">base</span><span class="o">::</span><span class="n">FieldTrialParamAssociator</span><span class="o">::</span><span class="n">AssociateFieldTrialParams</span><span class="p">(</span>
<span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">char_traits</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">,</span> 
    
<span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">char_traits</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">,</span> 
    
<span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">char_traits</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">char_traits</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">char_traits</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">char_traits</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="k">const</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">char_traits</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span><span class="o">:</span> 

<span class="nl">error</span><span class="p">:</span> <span class="n">undefined</span> <span class="n">reference</span> <span class="n">to</span> <span class="err">&#39;</span>

<span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">char_traits</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">char_traits</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&gt;::</span><span class="n">pair</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">char_traits</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">basic_string</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">char_traits</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span><span class="err">&#39;</span>

    
<span class="n">python</span> <span class="s">&#34;../../build/toolchain/gcc_solink_wrapper.py&#34;</span> <span class="o">--</span><span class="n">readelf</span><span class="o">=</span><span class="s">&#34;readelf&#34;</span> <span class="o">--</span><span class="n">nm</span><span class="o">=</span><span class="s">&#34;/usr/bin/nm&#34;</span>  <span class="o">--</span><span class="n">sofile</span><span class="o">=</span><span class="s">&#34;./libbase.so&#34;</span> <span class="o">--</span><span class="n">tocfile</span><span class="o">=</span><span class="s">&#34;./libbase.so.TOC&#34;</span> <span class="o">--</span><span class="n">output</span><span class="o">=</span><span class="s">&#34;./libbase.so&#34;</span> <span class="o">--</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">g</span><span class="o">++</span> <span class="o">-</span><span class="n">std</span><span class="o">=</span><span class="n">gnu</span><span class="o">++</span><span class="mi">14</span> <span class="o">-</span><span class="n">shared</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">soname</span><span class="o">=</span><span class="s">&#34;libbase.so&#34;</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">--</span><span class="n">fatal</span><span class="o">-</span><span class="n">warnings</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">--</span><span class="n">build</span><span class="o">-</span><span class="n">id</span> <span class="o">-</span><span class="n">fPIC</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">z</span><span class="p">,</span><span class="n">noexecstack</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">z</span><span class="p">,</span><span class="n">relro</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">z</span><span class="p">,</span><span class="n">defs</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">--</span><span class="n">as</span><span class="o">-</span><span class="n">needed</span> <span class="o">-</span><span class="n">fuse</span><span class="o">-</span><span class="n">ld</span><span class="o">=</span><span class="n">gold</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">--</span><span class="n">threads</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">--</span><span class="kr">thread</span><span class="o">-</span><span class="n">count</span><span class="o">=</span><span class="mi">4</span> <span class="o">-</span><span class="n">m64</span> <span class="o">-</span><span class="n">Werror</span> <span class="o">-</span><span class="n">rdynamic</span> <span class="o">-</span><span class="n">nodefaultlibs</span> <span class="o">--</span><span class="n">sysroot</span><span class="o">=</span><span class="p">..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">debian_sid_amd64</span><span class="o">-</span><span class="n">sysroot</span> <span class="o">-</span><span class="n">L</span><span class="p">..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">debian_sid_amd64</span><span class="o">-</span><span class="n">sysroot</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span> <span class="o">-</span><span class="n">L</span><span class="p">..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">debian_sid_amd64</span><span class="o">-</span><span class="n">sysroot</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span> <span class="o">-</span><span class="n">L</span><span class="p">..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">debian_sid_amd64</span><span class="o">-</span><span class="n">sysroot</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">rpath</span><span class="o">=</span><span class="err">\$</span><span class="n">ORIGIN</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">-</span><span class="n">O2</span> <span class="o">-</span><span class="n">Wl</span><span class="p">,</span><span class="o">--</span><span class="n">gc</span><span class="o">-</span><span class="n">sections</span> <span class="o">-</span><span class="n">L</span><span class="p">..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">debian_sid_amd64</span><span class="o">-</span><span class="n">sysroot</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span> <span class="o">-</span><span class="n">o</span> <span class="s">&#34;./libbase.so&#34;</span> <span class="err">@</span><span class="s">&#34;./libbase.so.rsp&#34;</span>

<span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">base</span><span class="o">::</span><span class="n">TimeDelta</span><span class="o">&gt;::</span><span class="n">pair</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">base</span><span class="o">::</span><span class="n">TimeDelta</span><span class="o">&gt;&amp;&amp;</span><span class="p">)</span><span class="err">&#39;</span>
    
    
    <span class="n">cp</span> <span class="n">build</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">debian_sid_amd64</span><span class="o">-</span><span class="n">sysroot</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">c</span><span class="o">++/</span><span class="mi">10</span><span class="o">/</span><span class="n">utility</span> <span class="n">build</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">debian_sid_amd64</span><span class="o">-</span><span class="n">sysroot</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="p">.</span>
    
    <span class="n">Copied</span> <span class="n">buildtools</span><span class="o">/</span><span class="n">third_party</span><span class="o">/</span><span class="n">libc</span><span class="o">++/</span><span class="n">trunk</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">refstring</span><span class="p">.</span><span class="n">h</span> <span class="n">to</span>
 <span class="mi">15</span>   <span class="n">buildtools</span><span class="o">/</span><span class="n">third_party</span><span class="o">/</span><span class="n">libc</span><span class="o">++</span><span class="n">abi</span><span class="o">/</span><span class="n">libcxx</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">refstring</span><span class="p">.</span><span class="n">h</span> <span class="n">to</span> <span class="n">work</span>
 <span class="mi">16</span>   <span class="n">around</span> <span class="nl">https</span><span class="p">:</span><span class="c1">//llvm.org/PR49313
</span><span class="c1"></span><span class="n">solibs</span> <span class="o">=</span> <span class="p">.</span><span class="o">/</span><span class="n">libabsl</span><span class="p">.</span><span class="n">so</span> <span class="p">.</span><span class="o">/</span><span class="n">libboringssl</span><span class="p">.</span><span class="n">so</span> <span class="p">.</span><span class="o">/</span><span class="n">libperfetto</span><span class="p">.</span><span class="n">so</span> <span class="p">.</span><span class="o">/</span><span class="n">libicui18n</span><span class="p">.</span><span class="n">so</span> <span class="p">.</span><span class="o">/</span><span class="n">libc</span><span class="o">++</span><span class="p">.</span><span class="n">so</span>

    
    
    <span class="err">&#39;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">WaitableEvent</span><span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">&gt;::</span><span class="n">pair</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">WaitableEvent</span><span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">&gt;&amp;&amp;</span><span class="p">)</span><span class="err">&#39;</span>
    

    <span class="err">&#39;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">base</span><span class="o">::</span><span class="n">TimeDelta</span><span class="o">&gt;::</span><span class="n">pair</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">base</span><span class="o">::</span><span class="n">TimeDelta</span><span class="o">&gt;&amp;&amp;</span><span class="p">)</span><span class="err">&#39;</span>

    <span class="err">&#39;</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">trace_event</span><span class="o">::</span><span class="n">MemoryAllocatorDumpGuid</span> <span class="k">const</span><span class="p">,</span> <span class="n">base</span><span class="o">::</span><span class="n">trace_event</span><span class="o">::</span><span class="n">ProcessMemoryDump</span><span class="o">::</span><span class="n">MemoryAllocatorDumpEdge</span><span class="o">&gt;::</span><span class="n">pair</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">__Cr</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">trace_event</span><span class="o">::</span><span class="n">MemoryAllocatorDumpGuid</span> <span class="k">const</span><span class="p">,</span> <span class="n">base</span><span class="o">::</span><span class="n">trace_event</span><span class="o">::</span><span class="n">ProcessMemoryDump</span><span class="o">::</span><span class="n">MemoryAllocatorDumpEdge</span><span class="o">&gt;</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span><span class="err">&#39;</span>


</code></pre></td></tr></table></div>
</div>
</div><p><a href="https://gcc.gnu.org/onlinedocs/libstdc%2B%2B/manual/using_dual_abi.html" target="_blank" rel="noopener">https://gcc.gnu.org/onlinedocs/libstdc%2B%2B/manual/using_dual_abi.html</a></p>
<p>vim buildtools/third_party/libc++/trunk/include/utility</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"> <span class="mi">308</span> <span class="err">#</span><span class="k">if</span> <span class="o">!</span><span class="n">defined</span><span class="p">(</span><span class="n">_LIBCPP_CXX03_LANG</span><span class="p">)</span>
 <span class="mi">309</span>     <span class="c1">//pair(pair const&amp;) = default;
</span><span class="c1"></span> <span class="mi">310</span>     <span class="n">pair</span><span class="p">(</span><span class="n">pair</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">);</span>      <span class="c1">//改成这样了
</span><span class="c1"></span> <span class="mi">311</span>     <span class="c1">//pair(pair&amp;&amp;) = default;
</span><span class="c1"></span> <span class="mi">312</span>     <span class="c1">//pair(pair const&amp;);
</span></code></pre></td></tr></table></div>
</div>
</div><hr>
<p>29456 09-24</p>
<p>25643 09-26</p>
<p>21609 09-27</p>
<p>372/22954</p>
<p>CVE-2021-3156
<a href="https://www.kb.cert.org/vuls/id/794544" target="_blank" rel="noopener">https://www.kb.cert.org/vuls/id/794544</a></p>
<p>Apply an Update</p>
<p>Update sudo to the latest version to address this vulnerability when operationally feasible. This issue is resolved in sudo version 1.9.5p2. Please install this version, or a version from your distribution that has the fix applied to it</p>

            </div>

            
    
    
        <ul class="post-copyright">
            <li class="copyright-item author"><span class="copyright-item-text">作者</span>：<a href="https://newdivide2014.github.io/zh/" class="p-author h-card" target="_blank" rel="noopener">嘟囔</a></li>
            
                
                
                
                
                <li class="copyright-item link"><span class="copyright-item-text">链接</span>：<a href="../../../zh/posts/tmp/" target="_blank" rel="noopener">https://newdivide2014.github.io/zh/zh/posts/tmp/</a></li>
            
            <li class="copyright-item license"><span class="copyright-item-text">许可</span>：<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a></li>
            
        </ul>
    



        </article>

        

        
    <div class="updated-badge-container">
        <span title="Updated @ 2021-09-29 18:35:15 CST" style="cursor:help">

<svg xmlns="http://www.w3.org/2000/svg" width="130" height="20" class="updated-badge"><linearGradient id="b" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="a"><rect width="130" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#a)"><path class="updated-badge-left" d="M0 0h55v20H0z"/><path class="updated-badge-right" d="M55 0h75v20H55z"/><path fill="url(#b)" d="M0 0h130v20H0z"/></g><g fill="#fff" text-anchor="middle" font-size="110"><text x="285" y="150" fill="#010101" fill-opacity=".3" textLength="450" transform="scale(.1)">updated</text><text x="285" y="140" textLength="450" transform="scale(.1)">updated</text><text x="915" y="150" fill="#010101" fill-opacity=".3" textLength="650" transform="scale(.1)">2021-09-29</text><text x="915" y="140" textLength="650" transform="scale(.1)">2021-09-29</text></g></svg>
        </span></div>



        


        <div class="post-share">

        

        <div class="share-items">

            
                <div class="share-item twitter">
                    
                    <a href="https://twitter.com/share?url=https://newdivide2014.github.io/zh/posts/tmp/&amp;text=&amp;hashtags=&amp;via=%25!s%28%3cnil%3e%29" title="分享到「Twitter」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon twitter-icon"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a>
                </div>
            

            
                <div class="share-item facebook">
                    
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://newdivide2014.github.io/zh/posts/tmp/&amp;hashtag=%23" title="分享到「Facebook」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon facebook-icon"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg></a>
                </div>
            

            
                <div class="share-item linkedin">
                    
                    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://newdivide2014.github.io/zh/posts/tmp/&amp;title=&amp;summary=C%e8%af%ad%e8%a8%80%e4%b8%adaccess/_access%e5%87%bd%e6%95%b0%e7%9a%84%e4%bd%bf%e7%94%a8%20https://blog.csdn.net/fengbingchun/article/details/100342049/%20int%20access%28const%20char%20*pathname,%20int%20mode%29;%20Linux%20inotify%e8%af%a6%e8%a7%a3%20https://blog.csdn.net/breakout_alex/article/details/89028868%201%202%203%20int%20fd%20=%20inotify_init%20%28%29;%20int%20wd%20=%20inotify_add_watch%20%28fd,%20path,%20mask%29;%20int%20ret%20=%20inotify_rm_watch%20%28fd,%20wd%29;%20https://blog.csdn.net/daiyudong2020/article/details/51695502%20==https://blog.csdn.net/u011279649/article/details/52016555==%20==https://blog.csdn.net/liuhengxiao/article/details/44171697==%20IN_IGNORED%ef%bc%9a%e7%9b%91%e6%8e%a7%e8%a2%ab%e6%98%be%e5%bc%8f%e7%a7%bb%e9%99%a4%ef%bc%88%e8%b0%83%e7%94%a8inotify_rm_watch%28%29%ef%bc%89%ef%bc%8c%e6%88%96%e8%80%85%e8%87%aa%e5%8a%a8%e7%a7%bb%e9%99%a4%ef%bc%88%e6%96%87%e4%bb%b6%e8%a2%ab%e5%88%a0%e9%99%a4%e6%88%96%e8%80%85%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e8%a2%ab%e5%8d%b8%e8%bd%bd%ef%bc%89%20https://blog.csdn.net/hanjw05/article/details/53860132%20IN_ALL_EVENTS%20%e4%bb%a5%e4%b8%8a%e6%89%80%e6%9c%89flag%e7%9a%84%e9%9b%86%e5%90%88%20%e5%8a%a0%e5%af%86%e5%8e%9f%e5%a7%8b%e6%96%87%e4%bb%b6%20sh%20../bmgjx/bin/dae_bmgjx.sh%208%20/test/123.key%20userauth.txt%20userauth.txt.enc%201%20%e7%bc%96%e8%af%91%e5%8a%a0%e5%af%86%e8%a7%a3%e5%af%86%e8%b0%83%e7%94%a8openssl%20g&#43;&#43;%20zbtest.cpp%20-I/usr/local/ssl/include%20-lssl%20-lcrypto%20-ldl%20-L/usr/local/ssl/lib%20-I.%20-L/work/bmgjx/lib/%20-lcryptokeymgr%20g&#43;&#43;%20Untitled-1.cpp%20-I/usr/local/ssl/include%20-lssl%20-lcrypto%20-ldl%20-L/usr/local/ssl/lib%20-I.%20-L/work/bmgjx/lib/%20-lcryptokeymgr%201%20C&#43;&#43;:%20munmap_chunk%28%29:%20invalid%20pointer%202017%e5%b9%b42%e2%80%a6%e2%80%a6&amp;source=%e5%98%9f%e5%9b%94" title="分享到「LinkedIn」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon linkedin-icon"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg></a>
                </div>
            

            
                <div class="share-item telegram">
                    
                    <a href="https://t.me/share/url?url=https://newdivide2014.github.io/zh/posts/tmp/&amp;text=" title="分享到「Telegram」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon telegram-icon"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"/></svg></a>
                </div>
            

            
                <div class="share-item weibo">
                    
                    <a href="https://service.weibo.com/share/share.php?&amp;url=https://newdivide2014.github.io/zh/posts/tmp/&amp;title=&amp;pic=https://newdivide2014.github.io/icons/apple-touch-icon.png&amp;searchPic=false" title="分享到「新浪微博」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon weibo-icon"><path d="M407 177.6c7.6-24-13.4-46.8-37.4-41.7-22 4.8-28.8-28.1-7.1-32.8 50.1-10.9 92.3 37.1 76.5 84.8-6.8 21.2-38.8 10.8-32-10.3zM214.8 446.7C108.5 446.7 0 395.3 0 310.4c0-44.3 28-95.4 76.3-143.7C176 67 279.5 65.8 249.9 161c-4 13.1 12.3 5.7 12.3 6 79.5-33.6 140.5-16.8 114 51.4-3.7 9.4 1.1 10.9 8.3 13.1 135.7 42.3 34.8 215.2-169.7 215.2zm143.7-146.3c-5.4-55.7-78.5-94-163.4-85.7-84.8 8.6-148.8 60.3-143.4 116s78.5 94 163.4 85.7c84.8-8.6 148.8-60.3 143.4-116zM347.9 35.1c-25.9 5.6-16.8 43.7 8.3 38.3 72.3-15.2 134.8 52.8 111.7 124-7.4 24.2 29.1 37 37.4 12 31.9-99.8-55.1-195.9-157.4-174.3zm-78.5 311c-17.1 38.8-66.8 60-109.1 46.3-40.8-13.1-58-53.4-40.3-89.7 17.7-35.4 63.1-55.4 103.4-45.1 42 10.8 63.1 50.2 46 88.5zm-86.3-30c-12.9-5.4-30 .3-38 12.9-8.3 12.9-4.3 28 8.6 34 13.1 6 30.8.3 39.1-12.9 8-13.1 3.7-28.3-9.7-34zm32.6-13.4c-5.1-1.7-11.4.6-14.3 5.4-2.9 5.1-1.4 10.6 3.7 12.9 5.1 2 11.7-.3 14.6-5.4 2.8-5.2 1.1-10.9-4-12.9z"/></svg></a>
                </div>
            

            
                <div class="share-item douban">
                    
                    <a href="https://www.douban.com/share/service?href=https://newdivide2014.github.io/zh/posts/tmp/&amp;name=&amp;text=C%e8%af%ad%e8%a8%80%e4%b8%adaccess/_access%e5%87%bd%e6%95%b0%e7%9a%84%e4%bd%bf%e7%94%a8%20https://blog.csdn.net/fengbingchun/article/details/100342049/%20int%20access%28const%20char%20*pathname,%20int%20mode%29;%20Linux%20inotify%e8%af%a6%e8%a7%a3%20https://blog.csdn.net/breakout_alex/article/details/89028868%201%202%203%20int%20fd%20=%20inotify_init%20%28%29;%20int%20wd%20=%20inotify_add_watch%20%28fd,%20path,%20mask%29;%20int%20ret%20=%20inotify_rm_watch%20%28fd,%20wd%29;%20https://blog.csdn.net/daiyudong2020/article/details/51695502%20==https://blog.csdn.net/u011279649/article/details/52016555==%20==https://blog.csdn.net/liuhengxiao/article/details/44171697==%20IN_IGNORED%ef%bc%9a%e7%9b%91%e6%8e%a7%e8%a2%ab%e6%98%be%e5%bc%8f%e7%a7%bb%e9%99%a4%ef%bc%88%e8%b0%83%e7%94%a8inotify_rm_watch%28%29%ef%bc%89%ef%bc%8c%e6%88%96%e8%80%85%e8%87%aa%e5%8a%a8%e7%a7%bb%e9%99%a4%ef%bc%88%e6%96%87%e4%bb%b6%e8%a2%ab%e5%88%a0%e9%99%a4%e6%88%96%e8%80%85%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e8%a2%ab%e5%8d%b8%e8%bd%bd%ef%bc%89%20https://blog.csdn.net/hanjw05/article/details/53860132%20IN_ALL_EVENTS%20%e4%bb%a5%e4%b8%8a%e6%89%80%e6%9c%89flag%e7%9a%84%e9%9b%86%e5%90%88%20%e5%8a%a0%e5%af%86%e5%8e%9f%e5%a7%8b%e6%96%87%e4%bb%b6%20sh%20../bmgjx/bin/dae_bmgjx.sh%208%20/test/123.key%20userauth.txt%20userauth.txt.enc%201%20%e7%bc%96%e8%af%91%e5%8a%a0%e5%af%86%e8%a7%a3%e5%af%86%e8%b0%83%e7%94%a8openssl%20g&#43;&#43;%20zbtest.cpp%20-I/usr/local/ssl/include%20-lssl%20-lcrypto%20-ldl%20-L/usr/local/ssl/lib%20-I.%20-L/work/bmgjx/lib/%20-lcryptokeymgr%20g&#43;&#43;%20Untitled-1.cpp%20-I/usr/local/ssl/include%20-lssl%20-lcrypto%20-ldl%20-L/usr/local/ssl/lib%20-I.%20-L/work/bmgjx/lib/%20-lcryptokeymgr%201%20C&#43;&#43;:%20munmap_chunk%28%29:%20invalid%20pointer%202017%e5%b9%b42%e2%80%a6%e2%80%a6" title="分享到「豆瓣」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon douban-icon"><path d="M.643.92v2.412h22.714V.92H.643zm1.974 4.926v9.42h18.764v-9.42H2.617zm2.72 2.408H18.69v4.605H5.338V8.254zm1.657 7.412l-2.512.938c1.037 1.461 1.87 2.825 2.512 4.091H0v2.385h24v-2.385h-6.678c.818-1.176 1.589-2.543 2.303-4.091l-2.73-.938a29.952 29.952 0 01-2.479 5.03h-4.75c-.786-1.962-1.677-3.641-2.672-5.03Z"/></svg></a>
                </div>
            

            
                <div class="share-item qq">
                    
                    <a href="https://connect.qq.com/widget/shareqq/index.html?url=https://newdivide2014.github.io/zh/posts/tmp/&amp;title=&amp;summary=C%e8%af%ad%e8%a8%80%e4%b8%adaccess/_access%e5%87%bd%e6%95%b0%e7%9a%84%e4%bd%bf%e7%94%a8%20https://blog.csdn.net/fengbingchun/article/details/100342049/%20int%20access%28const%20char%20*pathname,%20int%20mode%29;%20Linux%20inotify%e8%af%a6%e8%a7%a3%20https://blog.csdn.net/breakout_alex/article/details/89028868%201%202%203%20int%20fd%20=%20inotify_init%20%28%29;%20int%20wd%20=%20inotify_add_watch%20%28fd,%20path,%20mask%29;%20int%20ret%20=%20inotify_rm_watch%20%28fd,%20wd%29;%20https://blog.csdn.net/daiyudong2020/article/details/51695502%20==https://blog.csdn.net/u011279649/article/details/52016555==%20==https://blog.csdn.net/liuhengxiao/article/details/44171697==%20IN_IGNORED%ef%bc%9a%e7%9b%91%e6%8e%a7%e8%a2%ab%e6%98%be%e5%bc%8f%e7%a7%bb%e9%99%a4%ef%bc%88%e8%b0%83%e7%94%a8inotify_rm_watch%28%29%ef%bc%89%ef%bc%8c%e6%88%96%e8%80%85%e8%87%aa%e5%8a%a8%e7%a7%bb%e9%99%a4%ef%bc%88%e6%96%87%e4%bb%b6%e8%a2%ab%e5%88%a0%e9%99%a4%e6%88%96%e8%80%85%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e8%a2%ab%e5%8d%b8%e8%bd%bd%ef%bc%89%20https://blog.csdn.net/hanjw05/article/details/53860132%20IN_ALL_EVENTS%20%e4%bb%a5%e4%b8%8a%e6%89%80%e6%9c%89flag%e7%9a%84%e9%9b%86%e5%90%88%20%e5%8a%a0%e5%af%86%e5%8e%9f%e5%a7%8b%e6%96%87%e4%bb%b6%20sh%20../bmgjx/bin/dae_bmgjx.sh%208%20/test/123.key%20userauth.txt%20userauth.txt.enc%201%20%e7%bc%96%e8%af%91%e5%8a%a0%e5%af%86%e8%a7%a3%e5%af%86%e8%b0%83%e7%94%a8openssl%20g&#43;&#43;%20zbtest.cpp%20-I/usr/local/ssl/include%20-lssl%20-lcrypto%20-ldl%20-L/usr/local/ssl/lib%20-I.%20-L/work/bmgjx/lib/%20-lcryptokeymgr%20g&#43;&#43;%20Untitled-1.cpp%20-I/usr/local/ssl/include%20-lssl%20-lcrypto%20-ldl%20-L/usr/local/ssl/lib%20-I.%20-L/work/bmgjx/lib/%20-lcryptokeymgr%201%20C&#43;&#43;:%20munmap_chunk%28%29:%20invalid%20pointer%202017%e5%b9%b42%e2%80%a6%e2%80%a6&amp;pics=https://newdivide2014.github.io/icons/apple-touch-icon.png&amp;site=%e5%98%9f%e5%9b%94" title="分享到「QQ」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon qq-icon"><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z"/></svg></a>
                </div>
            

            
                <div class="share-item qzone">
                    
                    <a href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://newdivide2014.github.io/zh/posts/tmp/&amp;title=&amp;summary=C%e8%af%ad%e8%a8%80%e4%b8%adaccess/_access%e5%87%bd%e6%95%b0%e7%9a%84%e4%bd%bf%e7%94%a8%20https://blog.csdn.net/fengbingchun/article/details/100342049/%20int%20access%28const%20char%20*pathname,%20int%20mode%29;%20Linux%20inotify%e8%af%a6%e8%a7%a3%20https://blog.csdn.net/breakout_alex/article/details/89028868%201%202%203%20int%20fd%20=%20inotify_init%20%28%29;%20int%20wd%20=%20inotify_add_watch%20%28fd,%20path,%20mask%29;%20int%20ret%20=%20inotify_rm_watch%20%28fd,%20wd%29;%20https://blog.csdn.net/daiyudong2020/article/details/51695502%20==https://blog.csdn.net/u011279649/article/details/52016555==%20==https://blog.csdn.net/liuhengxiao/article/details/44171697==%20IN_IGNORED%ef%bc%9a%e7%9b%91%e6%8e%a7%e8%a2%ab%e6%98%be%e5%bc%8f%e7%a7%bb%e9%99%a4%ef%bc%88%e8%b0%83%e7%94%a8inotify_rm_watch%28%29%ef%bc%89%ef%bc%8c%e6%88%96%e8%80%85%e8%87%aa%e5%8a%a8%e7%a7%bb%e9%99%a4%ef%bc%88%e6%96%87%e4%bb%b6%e8%a2%ab%e5%88%a0%e9%99%a4%e6%88%96%e8%80%85%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e8%a2%ab%e5%8d%b8%e8%bd%bd%ef%bc%89%20https://blog.csdn.net/hanjw05/article/details/53860132%20IN_ALL_EVENTS%20%e4%bb%a5%e4%b8%8a%e6%89%80%e6%9c%89flag%e7%9a%84%e9%9b%86%e5%90%88%20%e5%8a%a0%e5%af%86%e5%8e%9f%e5%a7%8b%e6%96%87%e4%bb%b6%20sh%20../bmgjx/bin/dae_bmgjx.sh%208%20/test/123.key%20userauth.txt%20userauth.txt.enc%201%20%e7%bc%96%e8%af%91%e5%8a%a0%e5%af%86%e8%a7%a3%e5%af%86%e8%b0%83%e7%94%a8openssl%20g&#43;&#43;%20zbtest.cpp%20-I/usr/local/ssl/include%20-lssl%20-lcrypto%20-ldl%20-L/usr/local/ssl/lib%20-I.%20-L/work/bmgjx/lib/%20-lcryptokeymgr%20g&#43;&#43;%20Untitled-1.cpp%20-I/usr/local/ssl/include%20-lssl%20-lcrypto%20-ldl%20-L/usr/local/ssl/lib%20-I.%20-L/work/bmgjx/lib/%20-lcryptokeymgr%201%20C&#43;&#43;:%20munmap_chunk%28%29:%20invalid%20pointer%202017%e5%b9%b42%e2%80%a6%e2%80%a6&amp;pics=https://newdivide2014.github.io/icons/apple-touch-icon.png&amp;site=%e5%98%9f%e5%9b%94" title="分享到「QQ 空间」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon qzone-icon"><path d="M23.985 9.202c-.032-.099-.127-.223-.334-.258-.207-.036-7.351-1.406-7.351-1.406s-.105-.022-.198-.07c-.092-.047-.127-.167-.127-.167S12.447.956 12.349.77C12.25.583 12.104.532 12 .532c-.104 0-.251.051-.349.238-.098.186-3.626 6.531-3.626 6.531s-.035.12-.128.167c-.092.047-.197.07-.197.07S.556 8.908.348 8.943c-.208.036-.302.16-.333.258a.477.477 0 0 0 .125.449l5.362 5.49s.072.08.119.172c.016.104.005.21.005.21s-1.189 7.242-1.22 7.45.075.369.159.43c.083.062.233.106.421.013.189-.093 6.812-3.261 6.812-3.261s.098-.044.201-.061c.103-.017.201.061.201.061s6.623 3.168 6.812 3.261c.188.094.338.049.421-.013a.463.463 0 0 0 .159-.43c-.021-.14-.93-5.677-.93-5.677.876-.54 1.425-1.039 1.849-1.747-2.594.969-6.006 1.717-9.415 1.866-.915.041-2.41.097-3.473-.015-.678-.071-1.17-.144-1.243-.438-.053-.215.054-.46.545-.831a2640.5 2640.5 0 0 1 2.861-2.155c1.285-.968 3.559-2.47 3.559-2.731 0-.285-2.144-.781-4.037-.781-1.945 0-2.275.132-2.811.168-.488.034-.769.005-.804-.138-.06-.248.183-.389.588-.568.709-.314 1.86-.594 1.984-.626.194-.052 3.082-.805 5.618-.535 1.318.14 3.244.668 3.244 1.276 0 .342-1.721 1.494-3.225 2.597-1.149.843-2.217 1.561-2.217 1.688 0 .342 3.533 1.241 6.689 1.01l.003-.022c.048-.092.119-.172.119-.172l5.362-5.49a.477.477 0 0 0 .127-.449z"/></svg></a>
                </div>
            

            
                <div class="share-item qrcode">
                    <div class="qrcode-container" title="通过「二维码」"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon qrcode-icon"><path d="M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"/></svg><div id="qrcode-img"></div>
                    </div>
                    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>

<script>
    var typeNumber = 0;
    var errorCorrectionLevel = 'L';
    var qr = qrcode(typeNumber, errorCorrectionLevel);
    qr.addData('https:\/\/newdivide2014.github.io\/zh\/posts\/tmp\/');
    qr.make();
    document.getElementById('qrcode-img').innerHTML = qr.createImgTag();
</script>

                </div>
            

        </div>

    </div>




        
    
    



        
    



        


        


        
    
        
        
    
    
    
    
        <ul class="post-nav">
            
                <li class="post-nav-prev">
                    <a href="../../../zh/posts/huawei-switch/" rel="prev">&lt; 华为交换机一些命令及回显信息</a>
                </li>
            
            
        </ul>
    



        
    

        

        

        
            <div id="vcomments"></div>
        

        

        
    



    </div>
</main>


            
    <div id="back-to-top" class="back-to-top">
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a>
    </div>


            
    <footer id="footer" class="footer">
        <div class="footer-inner">
            <div class="site-info">©&nbsp;2021–2021&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;嘟囔</div><div class="powered-by">Powered by <a href="https://github.com/gohugoio/hugo" target="_blank" rel="noopener">Hugo</a> | Theme is <a href="https://github.com/reuixiy/hugo-theme-meme" target="_blank" rel="noopener">MemE</a></div><div class="site-copyright"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a></div>
                <div class="busuanzi-site-uv-and-pv">
                    <span id="busuanzi_container_site_uv"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon busuanzi-site-uv"><path d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"/></svg>&nbsp;<span id="busuanzi_value_site_uv"></span></span>&nbsp;|&nbsp;<span id="busuanzi_container_site_pv"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="icon busuanzi-site-pv"><path d="M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"/></svg>&nbsp;<span id="busuanzi_value_site_pv"></span></span>
                </div>

            
    
        <ul class="socials"><li class="socials-item">
                    <a href="../../../rss.xml" target="_blank" rel="external noopener" title="RSS"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon social-icon"><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/></svg></a>
                </li><li class="socials-item">
                    <a href="mailto:newdivide7037@gmail.com" target="_blank" rel="external noopener" title="Email"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon social-icon"><path d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"/></svg></a>
                </li></ul>
    



            
        </div>
    </footer>


        </div>
        

        
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css" integrity="sha256-gPJfuwTULrEAAcI3X4bALVU/2qBU+QY/TpoD3GO+Exw=" crossorigin="anonymous">
<script>
    if (typeof renderMathInElement === 'undefined') {
        var getScript = (options) => {
            var script = document.createElement('script');
            script.defer = true;
            script.crossOrigin = 'anonymous';
            Object.keys(options).forEach((key) => {
                script[key] = options[key];
            });
            document.body.appendChild(script);
        };
        getScript({
            src: 'https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js',
            integrity: 'sha256-YTW9cMncW/ZQMhY69KaUxIa2cPTxV87Uh627Gf5ODUw=',
            onload: () => {
                getScript({
                    src: 'https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/mhchem.min.js',
                    integrity: 'sha256-yzSfYeVsWJ1x+2g8CYHsB/Mn7PcSp8122k5BM4T3Vxw=',
                    onload: () => {
                        getScript({
                            src: 'https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js',
                            integrity: 'sha256-fxJzNV6hpc8tgW8tF0zVobKa71eTCRGTgxFXt1ZpJNM=',
                            onload: () => {
                                renderKaTex();
                            }
                        });
                    }
                });
            }
        });
    } else {
        renderKaTex();
    }
    function renderKaTex() {
        renderMathInElement(
            document.body,
            {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "\\[", right: "\\]", display: true},
                    {left: "$", right: "$", display: false},
                    {left: "\\(", right: "\\)", display: false}
                ]
            }
        );
    }
</script>




    <script>
    if (typeof MathJax === 'undefined') {
        window.MathJax = {
            loader: {
                load: ['[tex]/mhchem']
            },
            
            tex: {
                inlineMath: {'[+]': [['$', '$']]},
                tags: 'ams',
                packages: {'[+]': ['mhchem']}
            }
        };
        (function() {
            var script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js';
            script.defer = true;
            document.head.appendChild(script);
        })();
    } else {
        MathJax.texReset();
        MathJax.typeset();
    }
</script>






    

        

        
            <script>
    function loadComments() {
        if (typeof Valine === 'undefined') {
            var getScript = (options) => {
                var script = document.createElement('script');
                script.defer = true;
                script.crossOrigin = 'anonymous';
                Object.keys(options).forEach((key) => {
                    script[key] = options[key];
                });
                document.body.appendChild(script);
            };
            getScript({
                src: 'https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js',
                onload: () => {
                    newValine();
                }
            });
        } else {
            newValine();
        }
    }
    function newValine() {
        new Valine({
            el: '#vcomments',
            appId: 'pC83AJkk2IKCcKPmpiAvqcXx-gzGzoHsz',
            appKey: 'aW1DKwnfxvraor5yFKdlg5sh',
            placeholder: '嘿嘿～欢迎！',
            path: location.pathname,
            avatar: 'monsterid',
            meta: ["nick","mail","link"],
            pageSize:  10 ,
            lang: 'zh-cn',
            visitor:  true ,
            highlight:  true ,
            avatarForce:  false ,
            recordIP:  false ,
            serverURLs: '',
            emojiCDN: '',
            emojiMaps:  null ,
            enableQQ:  true ,
            requiredFields: []
        });
    }
</script>

        

        

        

    





    <script src="https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js" type="module" defer></script>




    
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    




    </body>
</html>
